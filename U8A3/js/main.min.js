var U8A3,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};U8A3=function(a){function b(){this.nextEvaluation=__bind(this.nextEvaluation,this),this.clearEvaluation=__bind(this.clearEvaluation,this),this.finishEvaluation=__bind(this.finishEvaluation,this),this.evaluateAnswer=__bind(this.evaluateAnswer,this),this.initEvaluation=__bind(this.initEvaluation,this);var a,c;a=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"repeatbtn",src:"repeat-btn.png"},{id:"playagain",src:"play_again.png"},{id:"startgame",src:"start_game.png"},{id:"pas1",src:"pas1.png"},{id:"pas2",src:"pas2.png"},{id:"pas3",src:"pas3.png"},{id:"pas4",src:"pas4.png"}],c=[{src:"sounds/good.mp3",id:"good"},{src:"sounds/TU2_U8_A3_instructions.mp3",id:"instructions"},{src:"sounds/wrong.mp3",id:"wrong"}],this.game={passports:[{x:260,y:260,values:["Eric Schmidt","Germany","blue","brown","1m 10cm"],cx:6,cy:-3},{x:860,y:270,values:["Melanie Murphy","Ireland","green","red","1m 7cm"],cx:8,cy:0},{x:260,y:608,values:["Cassandra Wang","China","dark brown","black","1m 15cm"],cx:-4,cy:0},{x:868,y:608,values:["Saul Peterson","Canada","light brown","blonde","1m 14cm"],cx:6,cy:-10}],steps:[{pattern:["I have","#wc","eyes. I have straight","#wc","hair. I'm","#wc","tall.","#br","My name's","#wc","I'm from Germany."],targets:["blue","brown","1m 10cm","Eric Schmidt"]},{pattern:["I'm","#wc",". I'm from","#wc",". I have","#wc","eyes.","#br","I have curly","#wc","hair. I'm 1m 7cm tall."],targets:["Melanie Murphy","Ireland","green","red"]},{pattern:["I have","#wc","eyes. I have curly blonde hair.","#br","I'm","#wc",". I'm from","#wc",". I'm","#wc","tall."],targets:["light brown","Saul Peterson","Canada","1m 14cm"]},{pattern:["I'm from","#wc",". I have dark brown eyes. I have long","#wc","hair.","#br","I'm","#wc","tall. My name's","#wc"],targets:["China","black","1m 15cm","Cassandra Wang"]}],positions:[{x:140,y:44},{x:164,y:99},{x:178,y:154},{x:190,y:209},{x:146,y:264}]},b.__super__.constructor.call(this,null,a,c)}return __extends(b,a),b.prototype.setStage=function(){return b.__super__.setStage.apply(this,arguments),this.intento=0,this.steps=this.shuffle(this.game.steps),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions",["Look at the passports, read and drag the words to complete the text."],80,200),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,16,0)),this.setDropper(1).setPassports().introEvaluation()},b.prototype.setPassports=function(){var a,b,c,d,e,f,g,h,i,j,k;for(b=1,j=this.game.passports,g=0,i=j.length;i>g;g++){for(f=j[g],e=new createjs.Container,e.x=f.x,e.y=f.y,e.name="pass"+b,a=this.createBitmap("p"+b,"pas"+b,0,0),e.addChild(a),this.addToMain(e),c=h=0,k=f.values.length-1;k>=h;c=h+=1)d=new DroppableText("p"+b+"v"+c,f.values[c],f.values[c],this.game.positions[c].x+f.cx,this.game.positions[c].y+f.cy,this.stage),this.addToLibrary(d),e.addChild(d);b++}return this},b.prototype.setDropper=function(a){var b,c,d,e,f,g,h,i,j,k,l;for(this.step=a,this.library.dropper&&this.mainContainer.contains(this.library.dropper)?b=this.library.dropper:(b=new createjs.Container,b.x=240,b.y=1e3,b.name="dropper",this.addToMain(b)),b.removeAllChildren(),d=0,e=0,f=0,this.targets=new Array,l=this.steps[a-1].pattern,j=0,k=l.length;k>j;j++)h=l[j],g=60*e+14,console.log(g),"#br"===h?(f=0,e++):"#wc"===h?(i=this.steps[a-1].targets[d],c=new WordContainer("h"+d,""+i,"#FFF","#eb188e",f,g,100,50),c.text.font="40px Quicksand",c.index=d,b.addChild(c),this.addToLibrary(c),this.targets.push(c),f+=c.width+14,d++):(c=this.createText("",h,"40px Quicksand","#333",f,g),b.addChild(c),f+=c.getMeasuredWidth()+24);return this},b.prototype.introEvaluation=function(){return b.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:1}),TweenLite.from([this.library.pass1,this.library.pass2,this.library.pass3,this.library.pass4],1,{alpha:0,delay:2}),TweenLite.from(this.library.dropper,1,{alpha:0,y:this.library.dropper.y+40,delay:2,onComplete:this.playInstructions,onCompleteParams:[this]})},b.prototype.initEvaluation=function(){var a,c,d,e,f;for(b.__super__.initEvaluation.apply(this,arguments),f=[],a=d=1,e=this.game.passports.length;e>=d;a=d+=1)f.push(function(){var b,d,e;for(e=[],c=b=0,d=this.game.passports[a-1].values.length-1;d>=b;c=b+=1)this.library["p"+a+"v"+c].updateDrops(this.targets),this.library["p"+a+"v"+c].addEventListener("dropped",this.evaluateAnswer),e.push(this.library["p"+a+"v"+c].initDragListener());return e}.call(this));return f},b.prototype.evaluateAnswer=function(a){return this.answer=a.target,this.drop=a.drop,this.answer.index===this.steps[this.step-1].targets[this.drop.index]?(this.answer.visible=!1,this.drop.changeText(this.answer.index),this.finishEvaluation(),0===this.intento&&this.library.score.plusOne(),this.intento=0):(this.warning(),this.intento=1,this.answer.returnToPlace())},b.prototype.finishEvaluation=function(){var a,b,c,d;for(createjs.Sound.play("good"),d=this.targets,b=0,c=d.length;c>b;b++)if(a=d[b],""===a.text.text)return;return setTimeout(this.clearEvaluation,1e3)},b.prototype.clearEvaluation=function(){var a,b,c,d,e,f;for(a=c=1,e=this.game.passports.length;e>=c;a=c+=1)for(b=d=0,f=this.game.passports[a-1].values.length-1;f>=d;b=d+=1)this.library["p"+a+"v"+b].visible=!0,this.library["p"+a+"v"+b].returnToPlace();return TweenLite.to(this.library.dropper,.5,{alpha:0,y:this.library.dropper.y+40,onComplete:this.nextEvaluation})},b.prototype.nextEvaluation=function(){var a,b,c,d,e,f;if(this.index++,this.index<this.steps.length){for(this.setDropper(this.index+1),a=c=1,e=this.game.passports.length;e>=c;a=c+=1)for(b=d=0,f=this.game.passports[a-1].values.length-1;f>=d;b=d+=1)this.library["p"+a+"v"+b].updateDrops(this.targets);return TweenLite.to(this.library.dropper,.5,{alpha:1,y:1e3})}return this.finish()},b.prototype.finish=function(){return TweenLite.to([this.library.pass1,this.library.pass2,this.library.pass3,this.library.pass4],1,{alpha:0}),b.__super__.finish.apply(this,arguments)},window.U8A3=b,b}(Oda);