var U8A2,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};U8A2=function(a){function b(){this.nextEvaluation=__bind(this.nextEvaluation,this),this.clearEvaluation=__bind(this.clearEvaluation,this),this.finishEvaluation=__bind(this.finishEvaluation,this),this.evaluateAnswer=__bind(this.evaluateAnswer,this),this.initEvaluation=__bind(this.initEvaluation,this);var a,c;a=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"repeatbtn",src:"repeat-btn.png"},{id:"playagain",src:"play_again.png"},{id:"startgame",src:"start_game.png"},{id:"n1",src:"question.png"},{id:"scene1",src:"scenebrazil.png"},{id:"scene2",src:"scenechina.png"},{id:"scene3",src:"sceneindia.png"},{id:"n2",src:"verb.png"}],c=[{src:"sounds/good.mp3",id:"good"},{src:"sounds/TU2_U8_A2_instructions.mp3",id:"instructions"},{src:"sounds/wrong.mp3",id:"wrong"}],this.game={scenes:[{steps:[{frase:"In Brazil.",pattern:["#wc","do they ","#wc","#ital"],targets:["Where","celebrate"],italics:[" Reveillon?"]},{frase:"On January 1st.",pattern:["#wc","do they","#wc","#ital"],targets:["When","celebrate"],italics:[" Reveillon?"]},{frase:"White clothes.",pattern:["#wc","do they","#wc","?"],targets:["What","wear"]},{frase:"They float boats with flowers and candles in the sea.",pattern:["#wc","do they","#wc","?"],targets:["What","do"]}],opt1:[{i:1,t:"When",x:50,y:70},{i:2,t:"What",x:180,y:44},{i:3,t:"Where",x:140,y:140}],opt2:[{i:1,t:"celebrate",x:52,y:40},{i:2,t:"do",x:100,y:144},{i:3,t:"wear",x:170,y:116}]},{steps:[{frase:"Moon cakes and pomelos.",pattern:["#wc","do they","#wc","?"],targets:["What","eat"]},{frase:"In September.",pattern:["#wc","do they","#wc","the Moon Festival","?"],targets:["When","celebrate"]},{frase:"Family and friends.",pattern:["#wc","do they","#wc","?"],targets:["Who","visit"]},{frase:"Lanterns.",pattern:["#wc","do the children","#wc","?"],targets:["What","carry"]}],opt1:[{i:1,t:"When",x:50,y:70},{i:2,t:"What",x:130,y:34},{i:3,t:"Who",x:180,y:90},{i:4,t:"Where",x:140,y:140}],opt2:[{i:1,t:"visit",x:80,y:30},{i:2,t:"eat",x:100,y:144},{i:3,t:"celebrate",x:50,y:81},{i:4,t:"carry",x:170,y:116}]},{steps:[{frase:"Beautiful jewelry.",pattern:["#wc","do the women","#wc","?"],targets:["What","wear"]},{frase:"In India.",pattern:["#wc","do they","#wc","#ital"],targets:["Where","celebrate"],italics:[" Diwali?"]},{frase:"In October or November.",pattern:["#wc","do they","#wc","#ital"],targets:["When","celebrate"],italics:[" Diwali?"]},{frase:"They watch fireworks and light candles for good luck.",pattern:["#wc","do they","#wc","?"],targets:["What","do"]}],opt1:[{i:1,t:"When",x:50,y:70},{i:2,t:"What",x:130,y:34},{i:3,t:"Who",x:180,y:90},{i:4,t:"Where",x:140,y:140}],opt2:[{i:1,t:"wear",x:170,y:116},{i:2,t:"do",x:100,y:144},{i:3,t:"celebrate",x:52,y:40}]}]},b.__super__.constructor.call(this,null,a,c)}return __extends(b,a),b.prototype.setStage=function(){return b.__super__.setStage.apply(this,arguments),this.escena=1,this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions",[" Drag the words to form a question."],80,200),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,24,0)),this.setScene(1).setDropper(1).setNube1().setNube2().introEvaluation()},b.prototype.setScene=function(a){return this.scene=this.game.scenes[a-1],this.intento=0,this.sc=this.createBitmap("scene","scene"+a,stageSize.w/2,300,"tc"),this.addToMain(this.sc),this},b.prototype.setDropper=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;for(this.step=a,this.library.dropper?c=this.library.dropper:(c=new createjs.Container,c.y=780,c.name="dropper"),c.alpha=1,c.parent||this.addToMain(c),c.removeAllChildren(),h=this.createText("q","Q:","48px Quicksand","#333",240,0),c.addChild(h),e=0,f=0,g=h.x+h.getMeasuredWidth()+20,m=this.scene.steps[a-1].pattern,k=0,l=m.length;l>k;k++)i=m[k],"#wc"===i?(j=this.scene.steps[a-1].targets[e],d=new WordContainer("h"+e,""+j,"#FFF","#eb188e",g,0,100,50),d.index=e,c.addChild(d),this.addToLibrary(d),g+=d.width+20,e++):"#ital"===i?(j=this.scene.steps[a-1].italics[f],d=this.createText("",j,"italic 48px Quicksand","#333",g,0),c.addChild(d),g+=d.getMeasuredWidth()+20,f++):(d=this.createText("",i,"48px Quicksand","#333",g,0),c.addChild(d),g+=d.getMeasuredWidth()+20);return b=this.createText("a","A: "+this.scene.steps[this.step-1].frase,"48px Quicksand","#333",240,80),c.addChild(b),this},b.prototype.setNube1=function(){var a,b,c,d,e,f,g;for(b=new createjs.Container,b.x=420,b.y=960,b.name="nube1",b.removeAllChildren(),a=this.createBitmap("backNube1","n1",0,0),b.addChild(a),g=this.scene.opt1,e=0,f=g.length;f>e;e++)d=g[e],c=new DroppableText("n1d"+d.i,d.t,d.t,d.x,d.y,this.stage),b.addChild(c),this.addToLibrary(c);return this.addToMain(b),this},b.prototype.setNube2=function(){var a,b,c,d,e,f,g;for(b=new createjs.Container,b.x=880,b.y=960,b.name="nube2",b.removeAllChildren(),a=this.createBitmap("backNube2","n2",0,0),b.addChild(a),g=this.scene.opt2,e=0,f=g.length;f>e;e++)d=g[e],c=new DroppableText("n2d"+d.i,d.t,d.t,d.x,d.y,this.stage),b.addChild(c),this.addToLibrary(c);return this.addToMain(b),this},b.prototype.introEvaluation=function(){return b.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:1}),TweenLite.from(this.library.scene,1,{alpha:0,y:this.library.scene.y+40,delay:2}),TweenLite.from(this.library.dropper,1,{alpha:0,y:this.library.dropper.y+40,delay:2}),TweenLite.from(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40,delay:3}),TweenLite.from(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40,delay:3,onComplete:this.playInstructions,onCompleteParams:[this]})},b.prototype.initEvaluation=function(){var a,c,d,e,f,g,h,i;for(b.__super__.initEvaluation.apply(this,arguments),g=this.scene.opt1,c=0,e=g.length;e>c;c++)a=g[c],this.library["n1d"+a.i].updateDrops(this.library.h0),this.library["n1d"+a.i].addEventListener("dropped",this.evaluateAnswer),this.library["n1d"+a.i].initDragListener();for(h=this.scene.opt2,i=[],d=0,f=h.length;f>d;d++)a=h[d],this.library["n2d"+a.i].updateDrops(this.library.h1),this.library["n2d"+a.i].addEventListener("dropped",this.evaluateAnswer),i.push(this.library["n2d"+a.i].initDragListener());return i},b.prototype.evaluateAnswer=function(a){return this.answer=a.target,this.drop=a.drop,this.answer.index===this.scene.steps[this.step-1].targets[this.drop.index]?(this.answer.visible=!1,this.drop.changeText(this.answer.index),0===this.intento&&this.library.score.plusOne(),this.intento=0,createjs.Sound.play("good"),this.finishEvaluation()):(this.warning(),this.intento=1,this.answer.returnToPlace())},b.prototype.finishEvaluation=function(){return""!==this.library.h0.text.text&&""!==this.library.h1.text.text?setTimeout(this.clearEvaluation,1e3):void 0},b.prototype.clearEvaluation=function(){var a,b,c,d,e,f,g;for(f=this.scene.opt1,b=0,d=f.length;d>b;b++)a=f[b],this.library["n1d"+a.i].visible=!0,this.library["n1d"+a.i].returnToPlace();for(g=this.scene.opt2,c=0,e=g.length;e>c;c++)a=g[c],this.library["n2d"+a.i].visible=!0,this.library["n2d"+a.i].returnToPlace();return TweenLite.to(this.library.dropper,.5,{alpha:0,y:this.library.dropper.y+40,onComplete:this.nextEvaluation})},b.prototype.nextEvaluation=function(){var a,b,c,d,e,f,g,h;if(this.index++,this.index<this.scene.steps.length){for(this.setDropper(this.index+1),TweenLite.to(this.library.dropper,.5,{alpha:1,y:780}),f=this.scene.opt1,b=0,d=f.length;d>b;b++)a=f[b],this.library["n1d"+a.i].updateDrops(this.library.h0);for(g=this.scene.opt2,h=[],c=0,e=g.length;e>c;c++)a=g[c],h.push(this.library["n2d"+a.i].updateDrops(this.library.h1));return h}return 3!==this.escena?(this.escena++,this.index=0,this.mainContainer.removeChild(this.sc),TweenLite.to(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40}),TweenLite.to(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40}),this.setScene(this.escena).setDropper(1).setNube1().setNube2().initEvaluation(),TweenLite.from(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40}),TweenLite.from(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40}),TweenLite.to(this.library.dropper,.5,{alpha:1,y:780})):this.finish()},b.prototype.finish=function(){return TweenLite.to(this.library.scene,1,{alpha:0,y:this.library.scene.y+40}),TweenLite.to(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40}),TweenLite.to(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40}),TweenLite.to(this.library.dropper,.5,{alpha:0,y:780}),b.__super__.finish.apply(this,arguments)},window.U8A2=b,b}(Oda);