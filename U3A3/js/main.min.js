var U3A3,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};U3A3=function(a){function b(){this.finish=__bind(this.finish,this),this.finishEvaluation=__bind(this.finishEvaluation,this),this.endGame=__bind(this.endGame,this),this.evaluateAnswer=__bind(this.evaluateAnswer,this),this.evaluateTextDrop=__bind(this.evaluateTextDrop,this),this.evaluateImageDrop=__bind(this.evaluateImageDrop,this),this.startGame=__bind(this.startGame,this),this.initEvaluation=__bind(this.initEvaluation,this),this.setSalad=__bind(this.setSalad,this),this.setSandwich=__bind(this.setSandwich,this);var a,c;a=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"repeatbtn",src:"repeat-btn.png"},{id:"playagain",src:"play_again.png"},{id:"startgame",src:"start_game.png"},{id:"guia1",src:"guia1.png"},{id:"guia2",src:"guia2.png"},{id:"guia3",src:"guia3.png"},{id:"guia4",src:"guia4.png"},{id:"btnsalad",src:"btn_salad.png"},{id:"btnsandwich",src:"btn_sandwich.png"},{id:"propsalad",src:"prop_salad.png"},{id:"propsandwich",src:"prop_sandwich.png"},{id:"wrong",src:"wrong.png"},{id:"correct",src:"correct.png"},{id:"chefAgain",src:"chef/chef_again.png"},{id:"chefSalad",src:"chef/chef_salad.png"},{id:"chefSandwich",src:"chef/chef_sandwich.png"},{id:"1cubierto1",src:"chef/cubierto_10001.png"},{id:"1cubierto2",src:"chef/cubierto_10002.png"},{id:"2cubierto1",src:"chef/cubierto_20001.png"},{id:"2cubierto2",src:"chef/cubierto_20002.png"},{id:"3cubierto1",src:"chef/cubierto_30001.png"},{id:"3cubierto2",src:"chef/cubierto_30002.png"},{id:"4cubierto1",src:"chef/cubierto_40001.png"},{id:"4cubierto2",src:"chef/cubierto_40002.png"},{id:"5cubierto1",src:"chef/cubierto_50001.png"},{id:"5cubierto2",src:"chef/cubierto_50002.png"},{id:"6cubierto1",src:"chef/cubierto_60001.png"},{id:"6cubierto2",src:"chef/cubierto_60002.png"},{id:"7cubierto1",src:"chef/cubierto_70001.png"},{id:"7cubierto2",src:"chef/cubierto_70002.png"},{id:"8cubierto1",src:"chef/cubierto_80001.png"},{id:"8cubierto2",src:"chef/cubierto_80002.png"},{id:"9cubierto1",src:"chef/cubierto_90001.png"},{id:"9cubierto2",src:"chef/cubierto_90002.png"},{id:"10cubierto1",src:"chef/cubierto_100001.png"},{id:"10cubierto2",src:"chef/cubierto_100002.png"},{id:"11cubierto1",src:"chef/cubierto_110001.png"},{id:"11cubierto2",src:"chef/cubierto_110002.png"},{id:"12cubierto1",src:"chef/cubierto_120001.png"},{id:"12cubierto2",src:"chef/cubierto_120002.png"},{id:"13cubierto1",src:"chef/cubierto_130001.png"},{id:"13cubierto2",src:"chef/cubierto_130002.png"},{id:"14cubierto1",src:"chef/cubierto_140001.png"},{id:"14cubierto2",src:"chef/cubierto_140002.png"},{id:"15cubierto1",src:"chef/cubierto_150001.png"},{id:"15cubierto2",src:"chef/cubierto_150002.png"},{id:"saladbtnready",src:"salad/btn_ready.png"},{id:"saladbtnstart",src:"salad/btn_start.png"},{id:"sandwichbtnready",src:"sandwich/btn_ready.png"},{id:"sandwichbtnstart",src:"sandwich/btn_start.png"},{id:"saladStart4Final3",src:"salad/final_CutFruit.png"},{id:"saladStart1Final5",src:"salad/final_Eat.png"},{id:"saladStart2Final4",src:"salad/final_MixFruit.png"},{id:"saladStart5Final2",src:"salad/final_WashFruit.png"},{id:"saladStart3Final1",src:"salad/final_WashHands.png"},{id:"saladlabel",src:"salad/label_fruit.png"},{id:"sandwichStart4Final4",src:"sandwich/final_bread.png"},{id:"sandwichStart3Final5",src:"sandwich/final_eat.png"},{id:"sandwichStart5Final2",src:"sandwich/final_Spread.png"},{id:"sandwichStart1Final3",src:"sandwich/final_Turkey.png"},{id:"sandwichStart2Final1",src:"sandwich/final_Wash.png"},{id:"sandwichlabel",src:"sandwich/label_sandwich.png"},{id:"saladstep",src:"salad/step.png"},{id:"sandwichstep",src:"sandwich/step.png"},{id:"saladline",src:"salad/line.png"},{id:"sandwichline",src:"sandwich/line.png"},{id:"saladnumber1",src:"salad/number_1.png"},{id:"saladnumber2",src:"salad/number_2.png"},{id:"saladnumber3",src:"salad/number_3.png"},{id:"saladnumber4",src:"salad/number_4.png"},{id:"saladnumber5",src:"salad/number_5.png"},{id:"sandwichnumber1",src:"sandwich/number_1.png"},{id:"sandwichnumber2",src:"sandwich/number_2.png"},{id:"sandwichnumber3",src:"sandwich/number_3.png"},{id:"sandwichnumber4",src:"sandwich/number_4.png"},{id:"sandwichnumber5",src:"sandwich/number_5.png"}],c=[{src:"sounds/good.mp3",id:"good"},{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/TU2_U3_A3_instructions.mp3",id:"instructions"},{src:"sounds/wrong.mp3",id:"swrong"}],this.salad={drags:[{id:"saladStart1Final5"},{id:"saladStart2Final4"},{id:"saladStart3Final1"},{id:"saladStart4Final3"},{id:"saladStart5Final2"}],texts:[{t:"   Wash the fruit.   ",x:330,y:974},{t:"   Wash your hands.   ",x:588,y:912},{t:"   Mix the fruit.   ",x:860,y:974},{t:"   Serve and eat!   ",x:1106,y:912},{t:"   Cut the fruit.   ",x:1392,y:974}]},this.sandwich={drags:[{id:"sandwichStart1Final3"},{id:"sandwichStart2Final1"},{id:"sandwichStart3Final5"},{id:"sandwichStart4Final4"},{id:"sandwichStart5Final2"}],texts:[{t:"Put slices of turkey on the bread.",x:330,y:974},{t:"Wash your hands.",x:588,y:912},{t:"Spread mayonnaise on the bread.",x:860,y:974},{t:"Eat your sandwich!",x:1106,y:912},{t:"Put the two slices of bread together.",x:1392,y:974}]},this.positions={dragsImg:[{x:320,y:390},{x:568,y:390},{x:814,y:390},{x:1062,y:390},{x:1308,y:390}],steps:[{x:154,y:592},{x:438,y:592},{x:720,y:592},{x:1004,y:592},{x:1288,y:592}],ready:{x:862,y:1078},start:{x:568,y:1078},score:{x:172,y:382},titulo:{x:820,y:262}},this.answers={sandwich:[{t:"sandwichstep1",d:"d2"},{t:"sandwichstep2",d:"d5"},{t:"sandwichstep3",d:"d1"},{t:"sandwichstep4",d:"d4"},{t:"sandwichstep5",d:"d3"},{t:"dt2",d:"sandwichline1"},{t:"dt3",d:"sandwichline2"},{t:"dt1",d:"sandwichline3"},{t:"dt5",d:"sandwichline4"},{t:"dt4",d:"sandwichline5"}],salad:[{t:"saladstep1",d:"d3"},{t:"saladstep2",d:"d5"},{t:"saladstep3",d:"d4"},{t:"saladstep4",d:"d2"},{t:"saladstep5",d:"d1"},{t:"dt2",d:"saladline1"},{t:"dt1",d:"saladline2"},{t:"dt5",d:"saladline3"},{t:"dt3",d:"saladline4"},{t:"dt4",d:"saladline5"}]},b.__super__.constructor.call(this,null,a,c)}return __extends(b,a),b.prototype.setStage=function(){return b.__super__.setStage.apply(this,arguments),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions",["Drag the pictures and instructions in the correct order and click on the Ready to Eat! button."],80,200),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,10,0)),this.setStart()},b.prototype.setStart=function(){var a,b;return this.insertBitmap("propsalad","propsalad",824,722,"tc"),a=new Button("btnsalad",this.preload.getResult("btnsalad"),0,824,950,"tc"),this.setReg(a,a.width/2,0),this.insertBitmap("propsandwich","propsandwich",824,298,"tc"),b=new Button("btnsandwich",this.preload.getResult("btnsandwich"),0,824,488,"tc"),this.setReg(b,b.width/2,0),this.addToMain(a,b),this.library.btnsalad.addEventListener("click",this.setSalad),this.library.btnsandwich.addEventListener("click",this.setSandwich),this},b.prototype.removeStart=function(){return this.library.btnsalad.removeEventListener("click",this.setSalad),this.library.btnsandwich.removeEventListener("click",this.setSandwich),TweenLite.to(this.library.btnsalad,.5,{alpha:0}),TweenLite.to(this.library.propsalad,.5,{alpha:0}),TweenLite.to(this.library.btnsandwich,.5,{alpha:0}),TweenLite.to(this.library.propsandwich,.5,{alpha:0})},b.prototype.setSandwich=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(this.removeStart(),g=new createjs.Container,this.current=g.name="sandwich",b=p=1;5>=p;b=p+=1)e=new createjs.Container,l=this.createBitmap("sandwichstep"+b,"sandwichstep",0,0),l.mouseEnabled=!1,l.set({scaleX:.46,scaleY:.46}),k=this.createBitmap("sandwichnumber"+b,"sandwichnumber"+b,66,13),k.mouseEnabled=!1,h=new createjs.Shape,h.graphics.beginFill("rgba(255,255,255,0.1)").drawRect(0,0,.46*l.getBounds().width,.46*l.getBounds().height),h.name="sandwichstep"+b,e.set({name:"sandwichstep"+b+"cont",x:this.positions.steps[b-1].x,y:this.positions.steps[b-1].y,shape:h}),e.addChild(l,k,h),f=new createjs.Container,j=this.createBitmap("sandwichline"+b,"sandwichline",0,0),j.mouseEnabled=!1,i=new createjs.Shape,i.graphics.beginFill("rgba(255,255,255,0.1)").drawRect(0,0,j.getBounds().width,j.getBounds().height),i.name="sandwichline"+b,f.set({name:"sandwichline"+b+"cont",x:e.x-20,y:e.y+180,shape:i}),f.addChild(j,i),this.addToLibrary(e,f,h,i),g.addChild(e,f);for(c=this.createBitmap("label","sandwichlabel",this.positions.titulo.x,this.positions.titulo.y,"tc"),c.mouseEnabled=!1,d=new Button("btnready",this.preload.getResult("sandwichbtnready"),"ready",this.positions.ready.x,this.positions.ready.y),m=new Button("btnstart",this.preload.getResult("sandwichbtnstart"),"start",this.positions.start.x,this.positions.start.y),a=new Counter("counter",60,"#56bb5b",this.positions.score.x,this.positions.score.y),g.addChild(c,d,m,a),this.addToLibrary(a,d,m),b=q=1,s=this.sandwich.drags.length;s>=q;b=q+=1)o=this.sandwich.drags[b-1],n=new Draggable("d"+b,this.preload.getResult(o.id),b,this.positions.dragsImg[b-1].x,this.positions.dragsImg[b-1].y),n.scaleX=n.scaleY=.46,this.observer.subscribe("init_sandwich",n.initDragListener),n.addEventListener("drop",this.evaluateImageDrop),g.addChild(n),this.addToLibrary(n);for(b=r=1,t=this.sandwich.texts.length;t>=r;b=r+=1)o=this.sandwich.texts[b-1],n=new DraggableText("dt"+b,o.t,b,o.x,o.y),n.text.font="40px Arial",n.text.lineHeight=80,n.text.lineWidth=400,n.text.textAlign="center",n.scaleX=n.scaleY=.46,n.setHitArea(),this.observer.subscribe("init_sandwich",n.initDragListener),n.addEventListener("drop",this.evaluateTextDrop),g.addChild(n),this.addToLibrary(n);return this.addToMain(g),this.introEvaluation(),this},b.prototype.setSalad=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(this.removeStart(),g=new createjs.Container,this.current=g.name="salad",b=p=1;5>=p;b=p+=1)e=new createjs.Container,h=new createjs.Shape,l=this.createBitmap("saladhstep"+b,"saladstep",0,0),l.mouseEnabled=!1,k=this.createBitmap("saladnumber"+b,"saladnumber"+b,66,13),k.mouseEnabled=!1,l.set({scaleX:.46,scaleY:.46}),h.graphics.beginFill("rgba(255,255,255,0.1)").drawRect(0,0,.46*l.getBounds().width,.46*l.getBounds().height),h.name="saladstep"+b,e.set({name:"saladstep"+b+"cont",x:this.positions.steps[b-1].x,y:this.positions.steps[b-1].y,shape:h}),e.addChild(l,k,h),f=new createjs.Container,i=new createjs.Shape,j=this.createBitmap("saladline"+b,"saladline",0,0),j.mouseEnabled=!1,i.graphics.beginFill("rgba(255,255,255,0.1)").drawRect(0,0,j.getBounds().width,j.getBounds().height),i.name="saladline"+b,f.set({name:"saladline"+b+"cont",x:e.x-20,y:e.y+180,width:j.getBounds().width,height:j.getBounds().height,shape:i}),f.addChild(j,i),this.addToLibrary(e,f,h,i),g.addChild(e,f);for(c=this.createBitmap("label","saladlabel",this.positions.titulo.x,this.positions.titulo.y,"tc"),c.mouseEnabled=!1,d=new Button("btnready",this.preload.getResult("saladbtnready"),"ready",this.positions.ready.x,this.positions.ready.y),m=new Button("btnstart",this.preload.getResult("saladbtnstart"),"start",this.positions.start.x,this.positions.start.y),a=new Counter("counter",60,"#eb2d3d",this.positions.score.x,this.positions.score.y),g.addChild(c,d,m,a),this.addToLibrary(a,d,m),b=q=1,s=this.salad.drags.length;s>=q;b=q+=1)o=this.salad.drags[b-1],n=new Draggable("d"+b,this.preload.getResult(o.id),b,this.positions.dragsImg[b-1].x,this.positions.dragsImg[b-1].y),n.scaleX=n.scaleY=.46,this.observer.subscribe("init_salad",n.initDragListener),n.addEventListener("drop",this.evaluateImageDrop),g.addChild(n),this.addToLibrary(n);for(b=r=1,t=this.salad.texts.length;t>=r;b=r+=1)o=this.salad.texts[b-1],n=new DraggableText("dt"+b,o.t,b,o.x,o.y),n.text.font="40px Arial",n.text.lineHeight=80,n.text.lineWidth=400,n.text.textAlign="center",n.scaleX=n.scaleY=.46,n.setHitArea(),this.observer.subscribe("init_salad",n.initDragListener),n.addEventListener("drop",this.evaluateTextDrop),g.addChild(n),this.addToLibrary(n);return this.addToMain(g),this.introEvaluation(),this},b.prototype.introEvaluation=function(){return b.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.btnstart,.5,{alpha:0}),this.playInstructions(this)},b.prototype.initEvaluation=function(){return b.__super__.initEvaluation.apply(this,arguments),this.library.btnstart.blink(),this.library.btnstart.addEventListener("click",this.startGame)},b.prototype.startGame=function(){return this.observer.notify("init_"+this.current),this.library.btnstart.removeEventListener("click",this.startGame),this.library.btnstart.blink(!1),this.library.btnready.addEventListener("click",this.evaluateAnswer),this.library.btnready.blink(),TweenLite.to(this.library.btnstart,.5,{alpha:0}),this.library.counter.addEventListener("timer_complete",this.endGame),this.library.counter.start()},b.prototype.evaluateImageDrop=function(a){var b,c,d,e;for(this.answer=a.target,b=!1,d=1;!(b===!0||d>5);)c=this.library[""+this.current+"step"+d+"cont"],e=c.shape.globalToLocal(this.stage.mouseX,this.stage.mouseY),c.shape.hitTest(e.x,e.y)?(this.answer.putInPlace({x:c.x,y:c.y},1,this.answer.scaleX,this.answer.scaleY),b=!0):d++;return b?void 0:this.answer.returnToPlace(1,this.answer.scaleX,this.answer.scaleY)},b.prototype.evaluateTextDrop=function(a){var b,c,d,e;for(this.answer=a.target,b=!1,d=1;!(b===!0||d>5);)c=this.library[""+this.current+"line"+d+"cont"],e=c.shape.globalToLocal(this.stage.mouseX,this.stage.mouseY),c.shape.hitTest(e.x,e.y)?("sandwich"===this.current&&this.answer.putInPlace({x:c.x+c.width/2,y:c.y+20},1,this.answer.scaleX,this.answer.scaleY),"salad"===this.current&&this.answer.putInPlace({x:c.x+c.width/2,y:c.y+14},1,this.answer.scaleX,this.answer.scaleY),b=!0):d++;return b?void 0:this.answer.returnToPlace(1,this.answer.scaleX,this.answer.scaleY)},b.prototype.evaluateAnswer=function(){var a,b,c,d,e,f,g,h;for(this.complete=!0,this.library.btnready.removeEventListener("click",this.evaluateAnswer),this.library.btnready.blink(!1),this.library.counter.stop(),h=this.answers[this.current],f=0,g=h.length;g>f;f++)e=h[f],a=this.library[e.t],c=this.library[e.t].localToLocal(20,20,this.library[e.d]),b=this.library[e.t].name.length>3?this.library[e.t].localToLocal(0,0,this.mainContainer):this.library[e.d].localToLocal(0,0,this.mainContainer),a.hitTest(c.x,c.y)?(this.library.score.plusOne(),d=this.createBitmap("correct","correct",b.x,b.y)):(this.complete=!1,d=this.createBitmap("wrong","wrong",b.x,b.y)),createjs.Sound.play(this.complete?"good":"swrong"),this.library[this.current].addChild(d);return setTimeout(this.finishEvaluation,2e3)},b.prototype.endGame=function(){return this.complete=!1,this.finishEvaluation()},b.prototype.finishEvaluation=function(){var a;return this.complete?("salad"===this.current&&(a=this.insertBitmap("chefSalad","chefSalad",800,1250,"bc")),"sandwich"===this.current&&(a=this.insertBitmap("chefSandwich","chefSandwich",800,1250,"bc"))):a=this.insertBitmap("chefAgain","chefAgain",800,1250,"bc"),TweenLite.from(a,.5,{alpha:0,y:-400,ease:Back.easeOut}),TweenLite.to(this.library[this.current],.5,{alpha:0,y:-400,ease:Back.easeOut,onComplete:this.finish})},b.prototype.finish=function(){return b.__super__.finish.apply(this,arguments)},window.U3A3=b,b}(Oda);