var U6A1,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};U6A1=function(a){function b(){this.nextEvaluation=__bind(this.nextEvaluation,this),this.finishEvaluation=__bind(this.finishEvaluation,this),this.evaluateLocation=__bind(this.evaluateLocation,this),this.evaluateAnswer=__bind(this.evaluateAnswer,this),this.initDrag=__bind(this.initDrag,this),this.selectPuzzle=__bind(this.selectPuzzle,this),this.initEvaluation=__bind(this.initEvaluation,this);var a,c;a=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"b1",src:"p1-btn.png"},{id:"b2",src:"p2-btn.png"},{id:"m1",src:"marco-1.png"},{id:"m2",src:"marco-2.png"},{id:"p1p1",src:"puzzle1-1.png"},{id:"p1p1back",src:"puzzle1-1-back.png"},{id:"p1p2",src:"puzzle1-2.png"},{id:"p1p2back",src:"puzzle1-2-back.png"},{id:"p1p3",src:"puzzle1-3.png"},{id:"p1p3back",src:"puzzle1-3-back.png"},{id:"p1p4",src:"puzzle1-4.png"},{id:"p1p4back",src:"puzzle1-4-back.png"},{id:"p1p5",src:"puzzle1-5.png"},{id:"p1p5back",src:"puzzle1-5-back.png"},{id:"p1p6",src:"puzzle1-6.png"},{id:"p1p6back",src:"puzzle1-6-back.png"},{id:"p1p7",src:"puzzle1-7.png"},{id:"p1p7back",src:"puzzle1-7-back.png"},{id:"p1p8",src:"puzzle1-8.png"},{id:"p1p8back",src:"puzzle1-8-back.png"},{id:"p1p9",src:"puzzle1-9.png"},{id:"p1p9back",src:"puzzle1-9-back.png"},{id:"p1p10",src:"puzzle1-10.png"},{id:"p1p10back",src:"puzzle1-10-back.png"},{id:"p1p11",src:"puzzle1-11.png"},{id:"p1p11back",src:"puzzle1-11-back.png"},{id:"p1p12",src:"puzzle1-12.png"},{id:"p1p12back",src:"puzzle1-12-back.png"},{id:"p2p1",src:"puzzle2-1.png"},{id:"p2p1back",src:"puzzle2-1-back.png"},{id:"p2p2",src:"puzzle2-2.png"},{id:"p2p2back",src:"puzzle2-2-back.png"},{id:"p2p3",src:"puzzle2-3.png"},{id:"p2p3back",src:"puzzle2-3-back.png"},{id:"p2p4",src:"puzzle2-4.png"},{id:"p2p4back",src:"puzzle2-4-back.png"},{id:"p2p5",src:"puzzle2-5.png"},{id:"p2p5back",src:"puzzle2-5-back.png"},{id:"p2p6",src:"puzzle2-6.png"},{id:"p2p6back",src:"puzzle2-6-back.png"},{id:"p2p7",src:"puzzle2-7.png"},{id:"p2p7back",src:"puzzle2-7-back.png"},{id:"p2p8",src:"puzzle2-8.png"},{id:"p2p8back",src:"puzzle2-8-back.png"},{id:"p2p9",src:"puzzle2-9.png"},{id:"p2p9back",src:"puzzle2-9-back.png"},{id:"p2p10",src:"puzzle2-10.png"},{id:"p2p10back",src:"puzzle2-10-back.png"},{id:"p2p11",src:"puzzle2-11.png"},{id:"p2p11back",src:"puzzle2-11-back.png"},{id:"p2p12",src:"puzzle2-12.png"},{id:"p2p12back",src:"puzzle2-12-back.png"},{id:"btnfalse",src:"false-btn.png"},{id:"btntrue",src:"true-btn.png"}],c=[{src:"sounds/TU2_U6_A1_instructions.mp3",id:"instructions"},{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/wrong.mp3",id:"wrong"},{src:"sounds/bell_cow_3.mp3",id:"bell"}],b.__super__.constructor.call(this,null,a,c)}return __extends(b,a),b.prototype.setStage=function(){var a,c;return b.__super__.setStage.apply(this,arguments),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions",["Drag the puzzle pieces, read and click on the correct answers."],80,200),a=this.createBitmap("b1","b1",1462,966),c=this.createBitmap("b2","b2",1462,1060),this.addToMain(a,c),this.addToLibrary(a,c),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,8,0)),this.introEvaluation()},b.prototype.introEvaluation=function(){var a;return b.__super__.introEvaluation.apply(this,arguments),a=new TimelineLite,a.from(this.library.header,1,{y:-this.library.header.height}).from(this.library.instructions,1,{alpha:0,x:0,onComplete:this.playInstructions,onCompleteParams:[this]}).from([this.library.b1,this.library.b2],1,{alpha:0,y:stageSize.h})},b.prototype.initEvaluation=function(){var a,c,d;for(b.__super__.initEvaluation.apply(this,arguments),d=[],a=c=1;2>=c;a=c+=1)this.blink(this.library["b"+a]),d.push(this.library["b"+a].on("click",this.selectPuzzle));return d},b.prototype.selectPuzzle=function(a){var b,c,d,e;for(d=e=1;2>=e;d=e+=1)this.blink(this.library["b"+d],!1),this.library["b"+d].off("click",this.selectPuzzle);switch(c=this.createBitmap("btntrue","btntrue",600,1080),b=this.createBitmap("btnfalse","btnfalse",840,1080),this.addToMain(c,b),this.addToLibrary(c,b),a.target.parent.name){case"b1":return this.pieces={p1p1:{x:304,y:162,text:"A firefighter puts out fires.",label:"true",back:!0},p1p2:{x:493,y:162},p1p3:{x:634,y:162,text:"A nurse helps sick people.",label:"true",back:!0},p1p4:{x:828,y:163},p1p5:{x:304,y:334,text:"A mail carrier works at he post office.",label:"true",back:!0},p1p6:{x:493,y:334,text:"A bus driver works in an office.",label:"false",back:!0},p1p7:{x:637,y:334,text:"A waitress works at a grocery store.",label:"false",back:!0},p1p8:{x:815,y:333,text:"A salesclerk works at a bank.",label:"false",back:!0},p1p9:{x:303,y:515},p1p10:{x:458,y:516,text:"A librarian sells books.",label:"false",back:!0},p1p11:{x:676,y:515},p1p12:{x:815,y:516,text:"A chef serves food.",label:"false",back:!0}},this.answers=8,this.setPuzzle(1);case"b2":return this.pieces={p2p1:{x:308,y:166,text:"A doctor works at a bank.",label:"false",back:!0},p2p2:{x:497,y:166},p2p3:{x:641,y:166,text:"A teacher works at a library.",label:"false",back:!0},p2p4:{x:834,y:166},p2p5:{x:306,y:338,text:"A mechanic fixes cars.",label:"true",back:!0},p2p6:{x:496,y:336,text:"A police officer puts out fires.",label:"false",back:!0},p2p7:{x:638,y:337,text:"A farmer fixes cars.",label:"false",back:!0},p2p8:{x:820,y:336,text:"A waitress works at a restaurant.",label:"true",back:!0},p2p9:{x:309,y:520},p2p10:{x:462,y:520,text:"A vet helps sick animals.",label:"true",back:!0},p2p11:{x:678,y:519},p2p12:{x:820,y:519,text:"A salesclerk works at a museum.",label:"false",back:!0}},this.answers=8,this.setPuzzle(2)}},b.prototype.setPuzzle=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(this.num=a,j=new createjs.Container,j.x=function(){switch(a){case 1:return 150;case 2:return 150}}(),j.y=300,j.name="puzzle",g=this.createBitmap("m"+a,"m"+a,290,150),j.addChild(g),e=n=1;12>=n;e=n+=1)this.pieces["p"+a+"p"+e].back?(h=new createjs.Container,h.set({name:"p"+a+"p"+e+"b",x:this.pieces["p"+a+"p"+e].x,y:this.pieces["p"+a+"p"+e].y}),b=this.createBitmap("p"+a+"p"+e+"b","p"+a+"p"+e+"back",0,0),b.mouseEnabled=!1,l=new createjs.Shape,l.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(0,0,b.getBounds().width,b.getBounds().height),l.name="p"+a+"p"+e+"shape",this.addToLibrary(l),k=new createjs.Shape,k.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(-h.x-j.x,-h.y-j.y,stageSize.w,stageSize.h),h.addChild(b,l,k),h.mouseChildren=!1):h=this.createBitmap("p"+a+"p"+e,"p"+a+"p"+e,this.pieces["p"+a+"p"+e].x,this.pieces["p"+a+"p"+e].y),this.addToLibrary(h),j.addChild(h);for(d=new createjs.Container,d.x=stageSize.w/2,d.y=380,d.name="dragpieces",f=0,this.drops=[],e=o=1;12>=o;e=o+=1)i=this.preload.getResult("p"+a+"p"+e),c=new Draggable("dp"+a+"p"+e,this.preload.getResult("p"+a+"p"+e),"p"+a+"p"+e,170*f,0),c.y=c.y-i.height/2,c.pos.y=c.y,c.addEventListener("drop",this.evaluateAnswer),this.observer.subscribe("init_drag",c.onInitEvaluation),this.observer.subscribe("stop_drag",c.onStopEvaluation),c.scaleX=c.scaleY=.6,this.addToLibrary(c),this.drops.push(c),this.pieces["p"+a+"p"+e].back&&(f++,d.addChild(c));return d.width=170*f,this.setReg(d,d.width/2,0),this.addToMain(j,d),j.cache(0,0,2*j.getBounds().width,2*j.getBounds().height),d.cache(0,-d.getBounds().height,2*d.getBounds().width,2*d.getBounds().height),m=new TimelineLite,m.from(j,.5,{alpha:0,y:j.y-40,force3D:!0}).from(d,.5,{alpha:0,y:j.y-40,force3D:!0,onComplete:this.initDrag,onCompleteParams:[j,d]})},b.prototype.initDrag=function(a,b){return b&&b.uncache(),this.observer.notify("init_drag")},b.prototype.initListeners=function(){return this.library.btntrue.addEventListener("click",this.evaluateLocation),this.library.btnfalse.addEventListener("click",this.evaluateLocation)},b.prototype.stopListeners=function(){return this.library.btntrue.removeEventListener("click",this.evaluateLocation),this.library.btnfalse.removeEventListener("click",this.evaluateLocation)},b.prototype.evaluateAnswer=function(a){var b,c,d,e,f,g,h,i,j;if(this.answer=a.target,d=this.library[this.answer.index+"shape"],e=this.library[this.answer.name],i=d.globalToLocal(this.stage.mouseX,this.stage.mouseY),d.hitTest(i.x,i.y)){for(b=this.drops.indexOf(this.library[this.answer.name]),this.drops.splice(b,1),f=d.parent.localToGlobal(d.x,d.y),g=this.answer.parent.globalToLocal(f.x,f.y),this.insertText("dropper",this.pieces[this.answer.index].text,"48px Quicksand","#333",stageSize.w/2,1020,"center"),createjs.Sound.play("bell"),this.answer.complete=!0,this.answer.putInPlace(g),h=j=1;12>=j;h=j+=1)c=this.library["dp"+this.num+"p"+h],c.removeAllEventListeners();return this.initListeners()}return this.answer.returnToPlace(this.answer.alpha,this.answer.scaleX,this.answer.scaleY)},b.prototype.evaluateLocation=function(a){var b,c,d,e,f,g;for(e=a.target.parent.name,e==="btn"+this.pieces[this.answer.index].label?(createjs.Sound.play("good"),this.library.score.plusOne(),setTimeout(this.finishEvaluation,1e3)):this.warning(),setTimeout(this.finishEvaluation,1e3),this.stopListeners(),g=[],d=f=1;12>=f;d=f+=1)c=this.library["dp"+this.num+"p"+d],b=this.drops.indexOf(this.library["dp"+this.num+"p"+d]),g.push(-1!==b?c.addEventListener("drop",this.evaluateAnswer):c.onStopEvaluation());return g},b.prototype.finishEvaluation=function(){return TweenLite.to(this.library.dropper,.5,{alpha:0,y:stageSize.h,ease:Quart.easeOut,onComplete:this.nextEvaluation})},b.prototype.nextEvaluation=function(){return this.index++,this.index<this.answers?this.initDrag():this.finish()},b.prototype.blink=function(a,b){return null==b&&(b=!0),TweenMax.killTweensOf(a),a.alpha=1,b?TweenMax.to(a,.5,{alpha:.5,repeat:-1,yoyo:!0}):void 0},b.prototype.finish=function(){return TweenLite.to(this.library.dragpieces,1,{alpha:0,y:this.y-40}),TweenLite.to(this.library.puzzle,1,{alpha:0,y:this.y-40}),TweenMax.to([this.library.p1,this.library.p2,this.library.btntrue,this.library.btnfalse],1,{alpha:0,y:stageSize.h}),b.__super__.finish.apply(this,arguments)},window.U6A1=b,b}(Oda);