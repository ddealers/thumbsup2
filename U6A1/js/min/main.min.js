(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,i=function(e,t){function i(){this.constructor=e}for(var a in t)s.call(t,a)&&(e[a]=t[a]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};e=function(e){function s(){this.nextEvaluation=t(this.nextEvaluation,this),this.finishEvaluation=t(this.finishEvaluation,this),this.evaluateLocation=t(this.evaluateLocation,this),this.evaluateAnswer=t(this.evaluateAnswer,this),this.initDrag=t(this.initDrag,this),this.selectPuzzle=t(this.selectPuzzle,this),this.initEvaluation=t(this.initEvaluation,this);var e,i;e=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"b1",src:"p1-btn.png"},{id:"b2",src:"p2-btn.png"},{id:"m1",src:"marco-1.png"},{id:"m2",src:"marco-2.png"},{id:"p1p1",src:"puzzle1-1.png"},{id:"p1p1back",src:"puzzle1-1-back.png"},{id:"p1p2",src:"puzzle1-2.png"},{id:"p1p2back",src:"puzzle1-2-back.png"},{id:"p1p3",src:"puzzle1-3.png"},{id:"p1p3back",src:"puzzle1-3-back.png"},{id:"p1p4",src:"puzzle1-4.png"},{id:"p1p4back",src:"puzzle1-4-back.png"},{id:"p1p5",src:"puzzle1-5.png"},{id:"p1p5back",src:"puzzle1-5-back.png"},{id:"p1p6",src:"puzzle1-6.png"},{id:"p1p6back",src:"puzzle1-6-back.png"},{id:"p1p7",src:"puzzle1-7.png"},{id:"p1p7back",src:"puzzle1-7-back.png"},{id:"p1p8",src:"puzzle1-8.png"},{id:"p1p8back",src:"puzzle1-8-back.png"},{id:"p1p9",src:"puzzle1-9.png"},{id:"p1p9back",src:"puzzle1-9-back.png"},{id:"p1p10",src:"puzzle1-10.png"},{id:"p1p10back",src:"puzzle1-10-back.png"},{id:"p1p11",src:"puzzle1-11.png"},{id:"p1p11back",src:"puzzle1-11-back.png"},{id:"p1p12",src:"puzzle1-12.png"},{id:"p1p12back",src:"puzzle1-12-back.png"},{id:"p2p1",src:"puzzle2-1.png"},{id:"p2p1back",src:"puzzle2-1-back.png"},{id:"p2p2",src:"puzzle2-2.png"},{id:"p2p2back",src:"puzzle2-2-back.png"},{id:"p2p3",src:"puzzle2-3.png"},{id:"p2p3back",src:"puzzle2-3-back.png"},{id:"p2p4",src:"puzzle2-4.png"},{id:"p2p4back",src:"puzzle2-4-back.png"},{id:"p2p5",src:"puzzle2-5.png"},{id:"p2p5back",src:"puzzle2-5-back.png"},{id:"p2p6",src:"puzzle2-6.png"},{id:"p2p6back",src:"puzzle2-6-back.png"},{id:"p2p7",src:"puzzle2-7.png"},{id:"p2p7back",src:"puzzle2-7-back.png"},{id:"p2p8",src:"puzzle2-8.png"},{id:"p2p8back",src:"puzzle2-8-back.png"},{id:"p2p9",src:"puzzle2-9.png"},{id:"p2p9back",src:"puzzle2-9-back.png"},{id:"p2p10",src:"puzzle2-10.png"},{id:"p2p10back",src:"puzzle2-10-back.png"},{id:"p2p11",src:"puzzle2-11.png"},{id:"p2p11back",src:"puzzle2-11-back.png"},{id:"p2p12",src:"puzzle2-12.png"},{id:"p2p12back",src:"puzzle2-12-back.png"},{id:"btnfalse",src:"false-btn.png"},{id:"btntrue",src:"true-btn.png"}],i=[{src:"sounds/TU2_U6_A1_instructions.mp3",id:"instructions"},{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/wrong.mp3",id:"wrong"},{src:"sounds/bell_cow_3.mp3",id:"bell"}],s.__super__.constructor.call(this,null,e,i)}return i(s,e),s.prototype.setStage=function(){return s.__super__.setStage.apply(this,arguments),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions","Drag the puzzle pieces, read and click on the correct answers.",80,200),this.p1=new createjs.Container,this.p1.name="p1",this.p1.x=1462,this.p1.y=966,this.b1=this.createBitmap("b1","b1",0,0),this.b1.mouseEnabled=!1,this.shape1=new createjs.Shape,this.shape1.graphics.beginFill("rgba(255,255,255,0.1)").drawRect(0,0,this.b1.getBounds().width,this.b1.getBounds().height),this.p1.addChild(this.b1,this.shape1),this.p2=new createjs.Container,this.p2.name="p2",this.p2.x=1462,this.p2.y=1060,this.b2=this.createBitmap("b2","b2",0,0),this.b2.mouseEnabled=!1,this.shape2=new createjs.Shape,this.shape2.graphics.beginFill("rgba(255,255,255,0.1)").drawRect(0,0,this.b2.getBounds().width,this.b2.getBounds().height),this.p2.addChild(this.b2,this.shape2),this.addToMain(this.p1,this.p2),this.addToLibrary(this.p1,this.p2),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,8,0)),this.introEvaluation()},s.prototype.introEvaluation=function(){return s.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:.5,onComplete:this.playInstructions,onCompleteParams:[this]}),TweenMax.from([this.library.p1,this.library.p2],1,{alpha:0,y:stageSize.h,delay:1})},s.prototype.initEvaluation=function(){var e,t,i;for(s.__super__.initEvaluation.apply(this,arguments),i=[],e=t=1;2>=t;e=t+=1)this.blink(this.library["p"+e]),i.push(this.library["p"+e].addEventListener("click",this.selectPuzzle));return i},s.prototype.selectPuzzle=function(e){var t,s;for(t=s=1;2>=s;t=s+=1)this.blink(this.library["p"+t],!1),this.library["p"+t].removeEventListener("click",this.selectPuzzle);switch(this.trueb=new createjs.Container,this.trueb.x=600,this.trueb.y=1080,this.trueb.name="btntrue",this["true"]=this.createBitmap("btrue","btntrue",0,0),this["true"].mouseEnabled=!1,this.shapetrue=new createjs.Shape,this.shapetrue.graphics.beginFill("rgba(0,0,0,0.1)").drawRect(0,0,this["true"].getBounds().width,this["true"].getBounds().height),this.trueb.addChild(this["true"],this.shapetrue),this.falseb=new createjs.Container,this.falseb.x=840,this.falseb.y=1080,this.falseb.name="btnfalse",this["false"]=this.createBitmap("bfalse","btnfalse",0,0),this["false"].mouseEnabled=!1,this.shapefalse=new createjs.Shape,this.shapefalse.graphics.beginFill("rgba(0,0,0,0.1)").drawRect(0,0,this["false"].getBounds().width,this["false"].getBounds().height),this.falseb.addChild(this["false"],this.shapefalse),this.addToMain(this.trueb,this.falseb),this.addToLibrary(this.trueb,this.falseb),console.log(e.target),e.target.parent.name){case"p1":this.pieces={p1p1:{x:304,y:162,text:"A firefighter puts out fires.",label:"true",back:!0},p1p2:{x:493,y:162},p1p3:{x:634,y:162,text:"A nurse helps sick people.",label:"true",back:!0},p1p4:{x:828,y:163},p1p5:{x:304,y:334,text:"A mail carrier works at he post office.",label:"true",back:!0},p1p6:{x:493,y:334,text:"A bus driver works in an office.",label:"false",back:!0},p1p7:{x:637,y:334,text:"A waitress works at a grocery store.",label:"false",back:!0},p1p8:{x:815,y:333,text:"A salesclerk works at a bank.",label:"false",back:!0},p1p9:{x:303,y:515},p1p10:{x:458,y:516,text:"A librarian sells books.",label:"false",back:!0},p1p11:{x:676,y:515},p1p12:{x:815,y:516,text:"A chef serves food.",label:"false",back:!0}},this.answers=8,this.setPuzzle(1);break;case"p2":this.pieces={p2p1:{x:308,y:166,text:"A doctor works at a bank.",label:"false",back:!0},p2p2:{x:497,y:166},p2p3:{x:641,y:166,text:"A teacher works at a library.",label:"false",back:!0},p2p4:{x:834,y:166},p2p5:{x:306,y:338,text:"A mechanic fixes cars.",label:"true",back:!0},p2p6:{x:496,y:336,text:"A police officer puts out fires.",label:"false",back:!0},p2p7:{x:638,y:337,text:"A farmer fixes cars.",label:"false",back:!0},p2p8:{x:820,y:336,text:"A waitress works at a restaurant.",label:"true",back:!0},p2p9:{x:309,y:520},p2p10:{x:462,y:520,text:"A vet helps sick animals.",label:"true",back:!0},p2p11:{x:678,y:519},p2p12:{x:820,y:519,text:"A salesclerk works at a museum.",label:"false",back:!0}},this.answers=8,this.setPuzzle(2)}return TweenLite.from(this.library.btntrue,1,{alpha:0,y:this.library.btntrue.y-40}),TweenLite.from(this.library.btnfalse,1,{alpha:0,y:this.library.btnfalse.y-40,delay:.2})},s.prototype.setPuzzle=function(e){var t,s,i,a,p,r,n,l,h,c,o,u,b;for(this.num=e,h=new createjs.Container,h.x=150,h.y=290,h.name="puzzle",r=this.createBitmap("m"+e,"m"+e,290,150),h.addChild(r),a=u=1;12>=u;a=u+=1)this.pieces["p"+e+"p"+a].back?(n=new createjs.Container,n.set({name:"p"+e+"p"+a+"b",x:this.pieces["p"+e+"p"+a].x,y:this.pieces["p"+e+"p"+a].y}),t=this.createBitmap("p"+e+"p"+a+"b","p"+e+"p"+a+"back",0,0),t.mouseEnabled=!1,o=new createjs.Shape,o.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(0,0,t.getBounds().width,t.getBounds().height),o.name="p"+e+"p"+a+"shape",this.addToLibrary(o),c=new createjs.Shape,c.graphics.beginFill("rgba(255,255,255,0.0)").drawRect(-n.x-h.x,-n.y-h.y,stageSize.w,stageSize.h),n.addChild(t,o,c),n.mouseChildren=!1):n=this.createBitmap("p"+e+"p"+a,"p"+e+"p"+a,this.pieces["p"+e+"p"+a].x,this.pieces["p"+e+"p"+a].y),this.addToLibrary(n),h.addChild(n);for(i=new createjs.Container,i.x=stageSize.w/2,i.y=270,i.name="dragpieces",p=0,this.drops=[],a=b=1;12>=b;a=b+=1)l=this.preload.getResult("p"+e+"p"+a),s=new Draggable("dp"+e+"p"+a,this.preload.getResult("p"+e+"p"+a),"p"+e+"p"+a,176*p,0),s.addEventListener("drop",this.evaluateAnswer),this.observer.subscribe("init_drag",s.onInitEvaluation),this.observer.subscribe("stop_drag",s.onStopEvaluation),s.scaleX=s.scaleY=.6,this.addToLibrary(s),this.drops.push(s),this.pieces["p"+e+"p"+a].back&&(p++,i.addChild(s));return i.width=176*p,this.setReg(i,i.width/2,0),console.log(this.drops),this.addToMain(h),this.addToMain(i),TweenLite.from(h,1,{alpha:0,y:h.y-40,delay:.6}),TweenLite.from(i,1,{alpha:0,y:h.y-40,delay:.6,onComplete:this.initDrag})},s.prototype.initDrag=function(){return this.observer.notify("init_drag")},s.prototype.initListeners=function(){return this.library.btntrue.addEventListener("click",this.evaluateLocation),this.library.btnfalse.addEventListener("click",this.evaluateLocation)},s.prototype.stopListeners=function(){return this.library.btntrue.removeEventListener("click",this.evaluateLocation),this.library.btnfalse.removeEventListener("click",this.evaluateLocation)},s.prototype.evaluateAnswer=function(e){var t,s,i,a,p,r,n,l,h;if(this.answer=e.target,i=this.library[this.answer.index+"shape"],a=this.library[this.answer.name],l=i.globalToLocal(this.stage.mouseX,this.stage.mouseY),i.hitTest(l.x,l.y)){for(console.log("array drops ",this.drops),t=this.drops.indexOf(this.library[this.answer.name]),console.log("indexof",t),this.drops.splice(t,1),console.log("array nuevo ",this.drops),p=i.parent.localToGlobal(i.x,i.y),r=this.answer.parent.globalToLocal(p.x,p.y),this.insertText("dropper",this.pieces[this.answer.index].text,"48px Quicksand","#333",stageSize.w/2,1020,"center"),createjs.Sound.play("bell"),this.answer.complete=!0,this.answer.putInPlace(r),n=h=1;12>=h;n=h+=1)s=this.library["dp"+this.num+"p"+n],s.removeAllEventListeners();return this.initListeners()}return this.answer.returnToPlace(this.answer.alpha,this.answer.scaleX,this.answer.scaleY)},s.prototype.evaluateLocation=function(e){var t,s,i,a,p,r;for(a=e.target.parent.name,console.log(a,"btn"+this.pieces,"btn"+this.pieces[this.answer.index].label),a==="btn"+this.pieces[this.answer.index].label?(createjs.Sound.play("good"),this.library.score.plusOne(),setTimeout(this.finishEvaluation,1e3)):this.warning(),setTimeout(this.finishEvaluation,1e3),this.stopListeners(),r=[],i=p=1;12>=p;i=p+=1)s=this.library["dp"+this.num+"p"+i],t=this.drops.indexOf(this.library["dp"+this.num+"p"+i]),-1!==t?r.push(s.addEventListener("drop",this.evaluateAnswer)):r.push(s.onStopEvaluation());return r},s.prototype.finishEvaluation=function(){return TweenLite.to(this.library.dropper,.5,{alpha:0,y:stageSize.h,ease:Quart.easeOut,onComplete:this.nextEvaluation})},s.prototype.nextEvaluation=function(){return this.index++,this.index<this.answers?this.initDrag():this.finish()},s.prototype.blink=function(e,t){return null==t&&(t=!0),TweenMax.killTweensOf(e),e.alpha=1,t?TweenMax.to(e,.5,{alpha:.5,repeat:-1,yoyo:!0}):void 0},s.prototype.finish=function(){return TweenLite.to(this.library.dragpieces,1,{alpha:0,y:this.y-40}),TweenLite.to(this.library.puzzle,1,{alpha:0,y:this.y-40}),TweenMax.to([this.library.p1,this.library.p2,this.library.btntrue,this.library.btnfalse],1,{alpha:0,y:stageSize.h}),s.__super__.finish.apply(this,arguments)},window.U6A1=s,s}(Oda)}).call(this);