var U2A4,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};U2A4=function(a){function b(){this.playSound=__bind(this.playSound,this),this.nextEvaluation=__bind(this.nextEvaluation,this),this.finishEvaluation=__bind(this.finishEvaluation,this),this.evaluateAnswer=__bind(this.evaluateAnswer,this),this.evaluateDrop=__bind(this.evaluateDrop,this),this.initEvaluation=__bind(this.initEvaluation,this);var a,c;a=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"finish",src:"finish-btn.png"},{id:"repeat",src:"repeat-btn.png"},{id:"clockbox",src:"clock-container.png"},{id:"mc1",src:"meg-clock-1.png"},{id:"mc2",src:"meg-clock-2.png"},{id:"mc3",src:"meg-clock-3.png"},{id:"mc4",src:"meg-clock-4.png"},{id:"mc5",src:"meg-clock-5.png"},{id:"mc6",src:"meg-clock-6.png"},{id:"m1",src:"meg-wakes.png"},{id:"m2",src:"meg-breakfast.png"},{id:"m3",src:"meg-leaves.png"},{id:"m4",src:"meg-dishes.png"},{id:"m5",src:"meg-dinner.png"},{id:"m6",src:"meg-sleep.png"},{id:"jc1",src:"jim-clock-1.png"},{id:"jc2",src:"jim-clock-2.png"},{id:"jc3",src:"jim-clock-3.png"},{id:"jc4",src:"jim-clock-4.png"},{id:"jc5",src:"jim-clock-5.png"},{id:"jc6",src:"jim-clock-6.png"},{id:"j1",src:"jim-shower.png"},{id:"j2",src:"jim-breakfast.png"},{id:"j3",src:"jim-leaves.png"},{id:"j4",src:"jim-bus.png"},{id:"j5",src:"jim-cat.png"},{id:"j6",src:"jim-tv.png"},{id:"imgwrong",src:"wrong.png"},{id:"imgcorrect",src:"correct.png"}],c=[{src:"sounds/TU2_U2_A4_instructions.mp3",id:"instructions"},{src:"sounds/TU2_U2_A4_Meg.mp3",id:"meg"},{src:"sounds/TU2_U2_A4_UncleJim.mp3",id:"jim"},{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/wrong.mp3",id:"wrong"}],this.answers=[{name:"meg",values:[{q:"sh1",a:"mc3"},{q:"sh2",a:"mc6"},{q:"sh3",a:"mc4"},{q:"sh4",a:"mc2"},{q:"sh5",a:"mc5"},{q:"sh6",a:"mc1"}]},{name:"jim",values:[{q:"sh1",a:"jc4"},{q:"sh2",a:"jc5"},{q:"sh3",a:"jc1"},{q:"sh4",a:"jc2"},{q:"sh5",a:"jc6"},{q:"sh6",a:"jc3"}]}],this.clocks=[{x:970,y:26},{x:1054,y:160},{x:970,y:290},{x:1054,y:422},{x:970,y:552},{x:1054,y:686}],this.drops=[{x:24,y:10},{x:440,y:10},{x:24,y:306},{x:440,y:306},{x:24,y:610},{x:440,y:610}],b.__super__.constructor.call(this,null,a,c)}return __extends(b,a),b.prototype.setStage=function(){var a,c;return b.__super__.setStage.apply(this,arguments),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions",["Listen and drag the clocks to the correct picture."],80,200),c=new Button("repeat",this.preload.getResult("repeat"),0,1090,1080),a=new Button("finish",this.preload.getResult("finish"),0,1326,1080),this.addToMain(c,a),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,12,0)),this.setMeg(),this.introEvaluation()},b.prototype.setMeg=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(i=new createjs.Container,i.x=234,i.y=248,this.current=i.name="meg",b=this.createBitmap("megWakes","m1",30,26),c=this.createBitmap("megBreakfast","m2",446,26),d=this.createBitmap("megLeaves","m3",30,322),e=this.createBitmap("megDishes","m4",446,322),f=this.createBitmap("megDinner","m5",30,626),g=this.createBitmap("megSleep","m6",446,626),i.addChild(b,c,d,e,f,g),a=k=1;6>=k;a=k+=1)j=new createjs.Shape,j.graphics.beginFill("#FFF").setStrokeStyle(2).beginStroke("#333").drawRoundRect(0,0,132,84,10),j.x=this.drops[a-1].x,j.y=this.drops[a-1].y,j.name="sh"+a,this.addToLibrary(j),i.addChild(j);for(a=l=1;6>=l;a=l+=1)h=new Draggable("mc"+a,this.preload.getResult("mc"+a),a,this.clocks[a-1].x,this.clocks[a-1].y),h.addEventListener("drop",this.evaluateDrop),this.observer.subscribe("init_meg_evaluation",h.onInitEvaluation),this.addToLibrary(h),i.addChild(h);return this.addToMain(i)},b.prototype.setJim=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(i=new createjs.Container,i.x=234,i.y=248,this.current=i.name="jim",b=this.createBitmap("jimShower","j1",30,26),c=this.createBitmap("jimBreakfast","j2",446,26),d=this.createBitmap("jimLeaves","j3",30,322),e=this.createBitmap("jimBus","j4",446,322),f=this.createBitmap("jimCat","j5",30,626),g=this.createBitmap("jimTv","j6",446,626),i.addChild(b,c,d,e,f,g),a=k=1;6>=k;a=k+=1)j=new createjs.Shape,j.graphics.beginFill("#FFF").setStrokeStyle(2).beginStroke("#000").drawRoundRect(0,0,132,84,10),j.x=this.drops[a-1].x,j.y=this.drops[a-1].y,j.name="sh"+a,this.addToLibrary(j),i.addChild(j);for(a=l=1;6>=l;a=l+=1)h=new Draggable("jc"+a,this.preload.getResult("jc"+a),a,this.clocks[a-1].x,this.clocks[a-1].y),h.addEventListener("drop",this.evaluateDrop),this.observer.subscribe("init_jim_evaluation",h.onInitEvaluation),this.addToLibrary(h),i.addChild(h);return this.addToMain(i)},b.prototype.introEvaluation=function(){return b.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:1}),TweenMax.from(this.library.meg,1,{alpha:0,x:this.library.meg.x+100,delay:2,onComplete:this.playInstructions,onCompleteParams:[this]})},b.prototype.initEvaluation=function(){return b.__super__.initEvaluation.apply(this,arguments),this.observer.notify("init_"+this.answers[this.index].name+"_evaluation"),this.library.repeat.addEventListener("click",this.playSound),this.library.finish.addEventListener("click",this.evaluateAnswer),this.sound=this.answers[this.index].name,this.playSound()},b.prototype.evaluateDrop=function(a){var b,c,d,e;for(this.answer=a.target,b=!1,d=1;!(b===!0||d>6);)c=this.library["sh"+d],e=c.globalToLocal(this.stage.mouseX,this.stage.mouseY),c.hitTest(e.x,e.y)?(this.answer.x=c.x,this.answer.y=c.y,this.answer.blink(!1),b=!0):(d++,this.answer.returnToPlace());return this},b.prototype.evaluateAnswer=function(){var a,b,c,d;for(this.library.repeat.removeEventListener("click",this.playSound),this.library.finish.removeEventListener("click",this.evaluateAnswer),b=d=1;6>=d;b=d+=1)a=this.answers[this.index].values[b-1],c=this.createSprite("resultado",["imgwrong","imgcorrect"],null,this.library[a.a].x+75,this.library[a.a].y),this.library[a.q].x===this.library[a.a].x&&this.library[a.q].y===this.library[a.a].y?(this.library.score.plusOne(),c.gotoAndStop(1)):c.gotoAndStop(0),this.library[this.current].addChild(c);return setTimeout(this.finishEvaluation,1e3)},b.prototype.finishEvaluation=function(){return createjs.Sound.stop(this.sound),TweenLite.to(this.library[this.answers[this.index].name],.5,{alpha:0,x:stageSize.w,ease:Quart.easeOut,onComplete:this.nextEvaluation})},b.prototype.nextEvaluation=function(){return this.index++,this.index<this.answers.length?(this.setJim(),TweenMax.from(this.library.jim,1,{alpha:0,x:this.library.jim.x+100,delay:1,onComplete:this.initEvaluation})):this.finish()},b.prototype.playSound=function(){return createjs.Sound.stop(this.sound),createjs.Sound.play(this.sound)},b.prototype.blink=function(a,b){return null==b&&(b=!0),TweenMax.killTweensOf(a),a.alpha=1,b?TweenMax.to(a,.5,{alpha:.5,repeat:-1,yoyo:!0}):void 0},b.prototype.finish=function(){return TweenLite.to(this.library.repeat,1,{alpha:0,x:this.x+40}),TweenLite.to(this.library.finish,1,{alpha:0,x:this.x+40}),TweenLite.to(this.library.jim,1,{alpha:0,x:this.library.jim.x+100}),b.__super__.finish.apply(this,arguments)},window.U2A4=b,b}(Oda);