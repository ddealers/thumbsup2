var U6A3,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};U6A3=function(a){function b(){this.nextEvaluation=__bind(this.nextEvaluation,this),this.clearEvaluation=__bind(this.clearEvaluation,this),this.finishEvaluation=__bind(this.finishEvaluation,this),this.evaluateAnswer=__bind(this.evaluateAnswer,this),this.initEvaluation=__bind(this.initEvaluation,this);var a,c;a=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"aBank",src:"a-bank.png"},{id:"aBusstop",src:"a-bus-stop.png"},{id:"aCandystore",src:"a-candy-store.png"},{id:"aGasstation",src:"a-gas-station.png"},{id:"aGrocerystore",src:"a-grocery-store.png"},{id:"aHospital",src:"a-hospital.png"},{id:"aLibrary",src:"a-library.png"},{id:"aMovietheater",src:"a-movie-theater.png"},{id:"aPetstore",src:"a-pet-store.png"},{id:"aPolicestation",src:"a-police-station.png"},{id:"aPostoffice",src:"a-post-office.png"},{id:"aRestaurant",src:"a-restaurant.png"},{id:"aShoestore",src:"a-shoe-store.png"},{id:"anAnimalhospital",src:"an-animal-hospital.png"},{id:"anInternetcafe",src:"an-Internet-cafe.png"},{id:"n1",src:"tag_preposition.png"},{id:"n2",src:"tag_words.png"}],c=[{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/wrong.mp3",id:"wrong"},{src:"sounds/TU2_U6_A3_instructions.mp3",id:"instructions"}],this.game={steps:[{img:"aBank",frase:"I need some money",targets:["a","bank"]},{img:"aBusstop",frase:"I need to take a bus.",targets:["a","bus","stop"]},{img:"aCandystore",frase:"I want a box of chocolates.",targets:["a","candy","store"]},{img:"aGasstation",frase:"I need some gas.",targets:["a","gas","station"]},{img:"aGrocerystore",frase:"I need some groceries.",targets:["a","grocery","store"]},{img:"aHospital",frase:"I need a doctor",targets:["a","hospital"]},{img:"aLibrary",frase:"I need a book",targets:["a","library"]},{img:"aMovietheater",frase:"I want to watch a movie.",targets:["a","movie","theater"]},{img:"aPetstore",frase:"I need some dog food.",targets:["a","pet","store"]},{img:"aPolicestation",frase:"I have a problem! I need some help!",targets:["a","police","station"]},{img:"aPostoffice",frase:"I need to send a postcard.",targets:["a","post","office"]},{img:"aShoestore",frase:"I need some sandals.",targets:["a","shoe","store"]},{img:"anInternetcafe",frase:"I need to send an e-mail.",targets:["an","Internet","cafe"]}],opt1:[{i:1,t:"a",x:52,y:30},{i:2,t:"an",x:88,y:60}],opt2:[{i:1,t:"cafe",x:40,y:50},{i:2,t:"stop",x:48,y:140},{i:3,t:"library",x:130,y:90},{i:4,t:"grocery",x:148,y:170},{i:5,t:"police",x:112,y:214},{i:6,t:"candy",x:248,y:52},{i:7,t:"post",x:282,y:120},{i:8,t:"animal",x:304,y:210},{i:9,t:"bus",x:400,y:42},{i:10,t:"theater",x:378,y:132},{i:11,t:"pet",x:506,y:66},{i:12,t:"shoe",x:480,y:200},{i:13,t:"gas",x:606,y:50},{i:14,t:"station",x:546,y:142},{i:15,t:"store",x:654,y:92},{i:16,t:"hospital",x:610,y:208},{i:17,t:"bank",x:756,y:50},{i:18,t:"internet",x:726,y:150},{i:19,t:"movie",x:766,y:222},{i:20,t:"office",x:836,y:96}]},b.__super__.constructor.call(this,null,a,c)}return __extends(b,a),b.prototype.setStage=function(){var a,c,d;return b.__super__.setStage.apply(this,arguments),this.steps=this.shuffleNoRepeat(this.game.steps,10),this.intento=0,d=function(){var a,b,d,e;for(d=this.steps,e=[],a=0,b=d.length;b>a;a++)c=d[a],e.push(c.img);return e}.call(this),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions",["Read and drag the words to make questions."],80,200),a=this.createSprite("images",d,null,stageSize.w/2,470,"mc"),a.scaleX=a.scaleY=.7,this.addToMain(a),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,10,0)),this.setDropper(1).setNube1().setNube2().introEvaluation()},b.prototype.setDropper=function(a){var b,c,d,e,f,g,h,i;for(this.step=a,b=this.library.dropper?this.library.dropper:new createjs.Container,b.parent||this.addToMain(b),b.alpha=1,b.y=this.library.images.y+30,b.name="dropper",b.removeAllChildren(),c=this.createText("frase",this.steps[a-1].frase,"48px Quicksand","#333",380,220,"center"),this.addToLibrary(c),b.addChild(c),f=this.createText("isThere","Is there","48px Quicksand","#333",0,300),b.addChild(f),e=h=0,i=this.steps[a-1].targets.length-1;i>=h;e=h+=1)d=new WordContainer("h"+e,"","#FFF","#F00",220*e+f.getMeasuredWidth()+20,310,200,44),d.index=e,b.addChild(d),this.addToLibrary(d);return g=this.createText("q","?","48px Quicksand","#333",230*this.steps[a-1].targets.length+f.getMeasuredWidth()-20,300),b.addChild(g),b.x=stageSize.w/2-(g.x+g.getMeasuredWidth())/2,this},b.prototype.setNube1=function(){var a,b,c,d,e,f,g;for(b=new createjs.Container,b.x=300,b.y=this.library.dropper.y+400,b.name="nube1",a=this.createBitmap("backNube1","n1",0,0),b.addChild(a),g=this.game.opt1,e=0,f=g.length;f>e;e++)d=g[e],c=new DroppableText("n1d"+d.i,d.t,d.t,d.x,d.y,this.stage),b.addChild(c),this.addToLibrary(c);return this.addToMain(b),this},b.prototype.setNube2=function(){var a,b,c,d,e,f,g;for(b=new createjs.Container,b.x=500,b.y=this.library.dropper.y+400,b.name="nube2",a=this.createBitmap("backNube2","n2",0,0),b.addChild(a),g=this.game.opt2,e=0,f=g.length;f>e;e++)d=g[e],c=new DroppableText("n2d"+d.i,d.t,d.t,d.x,d.y,this.stage),b.addChild(c),this.addToLibrary(c);return this.addToMain(b),this},b.prototype.introEvaluation=function(){return b.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:1}),TweenLite.from(this.library.dropper,1,{alpha:0,y:this.library.dropper.y+40,delay:2}),TweenLite.from(this.library.images,1,{alpha:0,y:this.library.images.y+40,delay:2}),TweenLite.from(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40,delay:3}),TweenLite.from(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40,delay:4,onComplete:this.playInstructions,onCompleteParams:[this]})},b.prototype.initEvaluation=function(){var a,c,d,e,f,g,h,i;for(b.__super__.initEvaluation.apply(this,arguments),g=this.game.opt1,c=0,e=g.length;e>c;c++)a=g[c],this.library["n1d"+a.i].updateDrops(this.library.h0),this.library["n1d"+a.i].addEventListener("dropped",this.evaluateAnswer),this.library["n1d"+a.i].initDragListener();for(h=this.game.opt2,i=[],d=0,f=h.length;f>d;d++)a=h[d],3===this.steps[this.step-1].targets.length?this.library["n2d"+a.i].updateDrops(this.library.h1,this.library.h2):this.library["n2d"+a.i].updateDrops(this.library.h1),this.library["n2d"+a.i].addEventListener("dropped",this.evaluateAnswer),i.push(this.library["n2d"+a.i].initDragListener());return i},b.prototype.evaluateAnswer=function(a){return this.answer=a.target,this.drop=a.drop,this.answer.index===this.steps[this.step-1].targets[this.drop.index]?(this.answer.visible=!1,this.drop.changeText(this.answer.index),createjs.Sound.play("good"),this.finishEvaluation()):(this.warning(),this.intento++,console.log(this.intento),this.answer.returnToPlace(),2===this.intento?(this.intento=0,this.clearEvaluation()):void 0)},b.prototype.finishEvaluation=function(){if(3===this.steps[this.step-1].targets.length){if(""===this.library.h0.text.text||""===this.library.h1.text.text||""===this.library.h2.text.text)return}else if(""===this.library.h0.text.text||""===this.library.h1.text.text)return;return this.library.score.plusOne(),this.intento=0,setTimeout(this.clearEvaluation,1e3)},b.prototype.clearEvaluation=function(){var a,b,c,d,e,f,g;for(f=this.game.opt1,b=0,d=f.length;d>b;b++)a=f[b],this.library["n1d"+a.i].visible=!0,this.library["n1d"+a.i].returnToPlace();for(g=this.game.opt2,c=0,e=g.length;e>c;c++)a=g[c],this.library["n2d"+a.i].visible=!0,this.library["n2d"+a.i].returnToPlace();return TweenLite.to(this.library.dropper,.5,{alpha:0,y:this.library.dropper.y+40}),TweenLite.to(this.library.images,.5,{scaleX:1,scaleY:1,alpha:0,ease:Back.easeOut,onComplete:this.nextEvaluation})},b.prototype.nextEvaluation=function(){var a,b,c,d,e,f,g,h;if(this.index++,this.index<this.steps.length){for(this.library.images.gotoAndStop(this.index),this.setDropper(this.index+1),TweenLite.to(this.library.dropper,.5,{alpha:1,y:this.library.images.y+40}),TweenLite.to(this.library.images,.5,{scaleX:.7,scaleY:.7,alpha:1,ease:Back.easeOut}),f=this.game.opt1,b=0,d=f.length;d>b;b++)a=f[b],this.library["n1d"+a.i].updateDrops(this.library.h0);for(g=this.game.opt2,h=[],c=0,e=g.length;e>c;c++)a=g[c],h.push(3===this.steps[this.step-1].targets.length?this.library["n2d"+a.i].updateDrops(this.library.h1,this.library.h2):this.library["n2d"+a.i].updateDrops(this.library.h1));return h}return this.index=0,this.finish()},b.prototype.finish=function(){return TweenLite.to(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40}),TweenLite.to(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40}),b.__super__.finish.apply(this,arguments)},window.U6A3=b,b}(Oda);