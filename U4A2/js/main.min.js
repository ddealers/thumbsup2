var U4A2,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};U4A2=function(a){function b(){this.nextEvaluation=__bind(this.nextEvaluation,this),this.finishEvaluation=__bind(this.finishEvaluation,this),this.evaluateAnswer=__bind(this.evaluateAnswer,this),this.initEvaluation=__bind(this.initEvaluation,this),this.updateCounter=__bind(this.updateCounter,this);var a,c;a=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"repeatbtn",src:"repeat-btn.png"},{id:"playagain",src:"play_again.png"},{id:"startgame",src:"start_game.png"},{id:"bluewhale",src:"bluewhale_img.png"},{id:"dolphin",src:"dolphin_img.png"},{id:"eagle",src:"eagle_img.png"},{id:"giantpanda",src:"giantpanda_img.png"},{id:"polarbear",src:"polarbear_img.png"},{id:"gorilla",src:"gorilla_img.png"},{id:"jaguar",src:"jaguar_img.png"},{id:"lion",src:"lion_img.png"},{id:"seaturtle",src:"seaturttle_img.png"}],c=[{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/TU2_U4_A2_instructions.mp3",id:"instructions"},{src:"sounds/wrong.mp3",id:"wrong"}],this.letters=[["g","i","a","n","t","p","a","n","d","a"],["p","s","e","a","t","u","r","t","l","e"],["o","u","s","q","f","a","t","y","i","j"],["l","g","e","x","k","e","j","d","o","a"],["a","e","d","o","l","p","h","i","n","g"],["r","a","n","h","y","j","i","n","b","u"],["b","g","o","r","i","l","l","a","t","a"],["e","l","k","d","o","z","p","l","n","r"],["a","e","o","f","e","a","d","o","f","l"],["r","b","l","u","e","w","h","a","l","e"]],this.answers=[{id:"seaturtle",line:["l11","l12","l13","l14","l15","l16","l17","l18","l19"]},{id:"polarbear",line:["l10","l20","l30","l40","l50","l60","l70","l80","l90"]},{id:"bluewhale",line:["l91","l92","l93","l94","l95","l96","l97","l98","l99"]},{id:"giantpanda",line:["l0","l1","l2","l3","l4","l5","l6","l7","l8","l9"]},{id:"dolphin",line:["l42","l43","l44","l45","l46","l47","l48"]},{id:"gorilla",line:["l61","l62","l63","l64","l65","l66","l67"]},{id:"jaguar",line:["l29","l39","l49","l59","l69","l79"]},{id:"eagle",line:["l41","l51","l61","l71","l81"]},{id:"lion",line:["l18","l28","l38","l48"]}],b.__super__.constructor.call(this,null,a,c)}return __extends(b,a),b.prototype.setStage=function(){return b.__super__.setStage.apply(this,arguments),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.library.header.mouseEnabled=!1,this.insertInstructions("instructions",["Find the words and drag the cursor."],80,200),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,150,0)),this.setAnimals().setSopa().introEvaluation()},b.prototype.setAnimals=function(){return this.insertBitmap("bluewhale","bluewhale",1018,930),this.insertBitmap("dolphin","dolphin",454,920),this.insertBitmap("eagle","eagle",66,312),this.insertBitmap("giantpanda","giantpanda",1322,498),this.insertBitmap("gorilla","gorilla",244,722),this.insertBitmap("jaguar","jaguar",284,264),this.insertBitmap("lion","lion",1172,260),this.insertBitmap("seaturtle","seaturtle",1180,744),this.insertBitmap("polarbear","polarbear",736,848),this},b.prototype.setSopa=function(){var a,b,c,d,e,f,g,h,i,j,k;for(c=0,a=this.letters.length,i=new createjs.Container,i.x=594,i.y=296,i.name="sopa",i.visible=!1,h=new createjs.Container,h.name="shapesContainer",i.addChild(h),this.addToLibrary(h),f=this.letters.length-1,g=new createjs.Shape,g.graphics.beginFill("rgba(255,255,255,0.1)").drawRect(-i.x,-i.y,stageSize.w,stageSize.h),i.addChild(g),a=j=0;f>=j;a=j+=1)for(e=this.letters[a].length-1,b=k=0;e>=k;b=k+=1)d=new ClickableText("l"+c,this.letters[a][b],"l"+c,52*b,52*a),d.h=a,d.i=b,d.text.font="40px Quicksand",d.text.textAlign="center",i.addChild(d),this.addToLibrary(d),c++;return this.addToMain(i),this},b.prototype.updateCounter=function(){return this.time--,this.library.score.updateTotal(this.time),0===this.time?this.finish():void 0},b.prototype.introEvaluation=function(){return b.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:1,onComplete:this.playInstructions,onCompleteParams:[this]}),TweenMax.allFrom([this.library.bluewhale,this.library.dolphin,this.library.eagle,this.library.giantpanda,this.library.gorilla,this.library.jaguar,this.library.lion,this.library.seaturtle,this.library.polarbear],1,{alpha:0,delay:1.5},.1)},b.prototype.initEvaluation=function(){return b.__super__.initEvaluation.apply(this,arguments),this.time=151,this.timer=setInterval(this.updateCounter,1e3),this.library.sopa.visible=!0,this.library.sopa.cache(-52,-52,572,572),TweenLite.from(this.library.sopa,1,{alpha:0,y:this.library.sopa.y-40}),this.library.sopa.addEventListener("mousedown",this.evaluateAnswer)},b.prototype.evaluateAnswer=function(a){var b,c,d,e,f,g,h,i,j;return b=[],i=new createjs.Shape,j=a.target,h=this.mainContainer.globalToLocal(this.stage.mouseX,this.stage.mouseY),f=this.mainContainer.getObjectUnderPoint(h.x,h.y),console.log("pt",h,console.log("oup",f)),console.log("target",j),e=0,d=0,this.library.shapesContainer.addChild(i),f&&(c=f.parent,c instanceof ClickableText)?(b.push(c.index),g={x:52*c.i-26,y:52*c.h,i:c.i,h:c.h},i.graphics.s("rgba(255, 0, 0, 1)").f("rgba(255, 0, 0, 0.5)").rr(g.x,g.y,52,52,10),this.library.sopa.cache(-52,-52,572,572),j.addEventListener("pressmove",function(a){return function(){var j;return h=a.mainContainer.globalToLocal(a.stage.mouseX,a.stage.mouseY),f=a.mainContainer.getObjectUnderPoint(h.x,h.y),f&&(c=f.parent,c instanceof ClickableText)?(e=0===Math.abs(c.i-g.i+1)?1:Math.abs(c.i-g.i+1),d=0===Math.abs(c.h-g.h+1)?1:Math.abs(c.h-g.h+1),j={w:52*e,h:52*d},b.push(c.index),i.graphics.c().s("rgba(255, 0, 0, 1)").f("rgba(255, 0, 0, 0.5)").rr(g.x,g.y,j.w,j.h,10),a.library.sopa.updateCache()):void 0}}(this)),j.addEventListener("pressup",function(a){return function(){var c,d,f,g,h,j;for(c=!1,b=Array(),e=f=0;99>=f;e=f+=1)i.hitTest(a.library["l"+e].x,a.library["l"+e].y+13)&&b.push(a.library["l"+e].name);for(j=a.answers,g=0,h=j.length;h>g;g++)d=j[g],d.line.toString()===b.toString()&&(TweenLite.to(a.library[d.id],.3,{y:a.library[d.id].y-200,alpha:0,onComplete:a.finishEvaluation}),c=!0);return c||a.library.shapesContainer.removeChild(i),a.library.sopa.updateCache()}}(this))):void 0},b.prototype.finishEvaluation=function(){return createjs.Sound.play("good"),this.nextEvaluation()},b.prototype.nextEvaluation=function(){return this.index++,this.index>=this.answers.length?this.finish():void 0},b.prototype.finish=function(){return clearInterval(this.timer),this.mainContainer.removeEventListener("mousedown",this.evaluateAnswer),TweenLite.to(this.library.sopa,1,{y:this.library.sopa.y+200,alpha:0}),b.__super__.finish.apply(this,arguments)},window.U4A2=b,b}(Oda);