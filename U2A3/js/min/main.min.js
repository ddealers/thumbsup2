(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty,p=function(e,t){function p(){this.constructor=e}for(var a in t)i.call(t,a)&&(e[a]=t[a]);return p.prototype=t.prototype,e.prototype=new p,e.__super__=t.prototype,e};e=function(e){function i(){this.nextEvaluation=t(this.nextEvaluation,this),this.finishEvaluation=t(this.finishEvaluation,this),this.evaluateLocation=t(this.evaluateLocation,this),this.evaluateAnswer=t(this.evaluateAnswer,this),this.initDrag=t(this.initDrag,this),this.selectPuzzle=t(this.selectPuzzle,this),this.initEvaluation=t(this.initEvaluation,this);var e,p;e=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"above",src:"above-btn.png"},{id:"behind",src:"behind-btn.png"},{id:"in",src:"in-btn.png"},{id:"next",src:"next-btn.png"},{id:"on",src:"on-btn.png"},{id:"under",src:"under-btn.png"},{id:"p1",src:"p1-btn.png"},{id:"p2",src:"p2-btn.png"},{id:"p3",src:"p3-btn.png"},{id:"m1",src:"marco-1.png"},{id:"m2",src:"marco-2.png"},{id:"m3",src:"marco-3.png"},{id:"p1p1",src:"puzzle1-1.png"},{id:"p1p1back",src:"puzzle1-1-back.png"},{id:"p1p2",src:"puzzle1-2.png"},{id:"p1p2back",src:"puzzle1-2-back.png"},{id:"p1p3",src:"puzzle1-3.png"},{id:"p1p3back",src:"puzzle1-3-back.png"},{id:"p1p4",src:"puzzle1-4.png"},{id:"p1p4back",src:"puzzle1-4-back.png"},{id:"p1p5",src:"puzzle1-5.png"},{id:"p1p5back",src:"puzzle1-5-back.png"},{id:"p1p6",src:"puzzle1-6.png"},{id:"p1p6back",src:"puzzle1-6-back.png"},{id:"p1p7",src:"puzzle1-7.png"},{id:"p1p7back",src:"puzzle1-7-back.png"},{id:"p1p8",src:"puzzle1-8.png"},{id:"p1p8back",src:"puzzle1-8-back.png"},{id:"p1p9",src:"puzzle1-9.png"},{id:"p1p9back",src:"puzzle1-9-back.png"},{id:"p1p10",src:"puzzle1-10.png"},{id:"p1p10back",src:"puzzle1-10-back.png"},{id:"p1p11",src:"puzzle1-11.png"},{id:"p1p11back",src:"puzzle1-11-back.png"},{id:"p1p12",src:"puzzle1-12.png"},{id:"p1p12back",src:"puzzle1-12-back.png"},{id:"p2p1",src:"puzzle2-1.png"},{id:"p2p1back",src:"puzzle2-1-back.png"},{id:"p2p2",src:"puzzle2-2.png"},{id:"p2p2back",src:"puzzle2-2-back.png"},{id:"p2p3",src:"puzzle2-3.png"},{id:"p2p3back",src:"puzzle2-3-back.png"},{id:"p2p4",src:"puzzle2-4.png"},{id:"p2p4back",src:"puzzle2-4-back.png"},{id:"p2p5",src:"puzzle2-5.png"},{id:"p2p5back",src:"puzzle2-5-back.png"},{id:"p2p6",src:"puzzle2-6.png"},{id:"p2p6back",src:"puzzle2-6-back.png"},{id:"p2p7",src:"puzzle2-7.png"},{id:"p2p7back",src:"puzzle2-7-back.png"},{id:"p2p8",src:"puzzle2-8.png"},{id:"p2p8back",src:"puzzle2-8-back.png"},{id:"p2p9",src:"puzzle2-9.png"},{id:"p2p9back",src:"puzzle2-9-back.png"},{id:"p2p10",src:"puzzle2-10.png"},{id:"p2p10back",src:"puzzle2-10-back.png"},{id:"p2p11",src:"puzzle2-11.png"},{id:"p2p11back",src:"puzzle2-11-back.png"},{id:"p2p12",src:"puzzle2-12.png"},{id:"p2p12back",src:"puzzle2-12-back.png"},{id:"p3p1",src:"puzzle3-1.png"},{id:"p3p1back",src:"puzzle3-1-back.png"},{id:"p3p2",src:"puzzle3-2.png"},{id:"p3p2back",src:"puzzle3-2-back.png"},{id:"p3p3",src:"puzzle3-3.png"},{id:"p3p3back",src:"puzzle3-3-back.png"},{id:"p3p4",src:"puzzle3-4.png"},{id:"p3p4back",src:"puzzle3-4-back.png"},{id:"p3p5",src:"puzzle3-5.png"},{id:"p3p5back",src:"puzzle3-5-back.png"},{id:"p3p6",src:"puzzle3-6.png"},{id:"p3p6back",src:"puzzle3-6-back.png"},{id:"p3p7",src:"puzzle3-7.png"},{id:"p3p7back",src:"puzzle3-7-back.png"},{id:"p3p8",src:"puzzle3-8.png"},{id:"p3p8back",src:"puzzle3-8-back.png"},{id:"p3p9",src:"puzzle3-9.png"},{id:"p3p9back",src:"puzzle3-9-back.png"},{id:"p3p10",src:"puzzle3-10.png"},{id:"p3p10back",src:"puzzle3-10-back.png"},{id:"p3p11",src:"puzzle3-11.png"},{id:"p3p11back",src:"puzzle3-11-back.png"},{id:"p3p12",src:"puzzle3-12.png"},{id:"p3p12back",src:"puzzle3-12-back.png"}],p=[{src:"sounds/TU2_U2_A3_instructions.mp3",id:"instructions"},{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/wrong.mp3",id:"wrong"}],i.__super__.constructor.call(this,null,e,p)}return p(i,e),i.prototype.setStage=function(){var e,t,p;return i.__super__.setStage.apply(this,arguments),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions",["Drag the puzzle pieces, read and click on the correct answers."],80,200),e=new Button("p1",this.preload.getResult("p1"),0,1462,872),t=new Button("p2",this.preload.getResult("p2"),0,1462,966),p=new Button("p3",this.preload.getResult("p3"),0,1462,1060),this.addToMain(e,t,p),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,8,0)),this.introEvaluation()},i.prototype.introEvaluation=function(){return i.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:1,onComplete:this.playInstructions,onCompleteParams:[this]}),TweenMax.from([this.library.p1,this.library.p2,this.library.p3],1,{alpha:0,y:stageSize.h,delay:2})},i.prototype.initEvaluation=function(){var e,t,p;for(i.__super__.initEvaluation.apply(this,arguments),p=[],e=t=1;3>=t;e=t+=1)this.blink(this.library["p"+e]),p.push(this.library["p"+e].addEventListener("click",this.selectPuzzle));return p},i.prototype.selectPuzzle=function(e){var t,i,p,a,s,r,n,l;for(p=l=1;3>=l;p=l+=1)this.blink(this.library["p"+p],!1),this.library["p"+p].removeEventListener("click",this.selectPuzzle);switch(i=new Button("behind",this.preload.getResult("behind"),0,236,580),a=new Button("in",this.preload.getResult("in"),0,236,694),n=new Button("under",this.preload.getResult("under"),0,236,808),s=new Button("next",this.preload.getResult("next"),0,1256,586),r=new Button("on",this.preload.getResult("on"),0,1256,700),t=new Button("above",this.preload.getResult("above"),0,1256,814),this.addToMain(i,a,n,s,r,t),e.target.name){case"p1":this.pieces={p1p1:{x:20,y:20,texta:"The picture is",textb:"the fridge.",label:"above",back:!0},p1p2:{x:166,y:20},p1p3:{x:357,y:20,texta:"The cat is",textb:"the flowers.",label:"next to",back:!0},p1p4:{x:20,y:136},p1p5:{x:164,y:160,texta:"The apples are",textb:"the sink.",label:"in",back:!0},p1p6:{x:350,y:160},p1p7:{x:20,y:300,texta:"The broom is",textb:"the fridge.",label:"next to",back:!0},p1p8:{x:154,y:266,texta:"The fruit is",textb:"the table.",label:"on",back:!0},p1p9:{x:350,y:270,texta:"The cake is",textb:"the oven.",label:"in",back:!0},p1p10:{x:20,y:404,texta:"The mouse is",textb:"the chair.",label:"behind",back:!0},p1p11:{x:166,y:406,texta:"The puppy is",textb:"the table.",label:"under",back:!0},p1p12:{x:360,y:416}},this.answers=8,this.setPuzzle(1);break;case"p2":this.pieces={p2p1:{x:77,y:14,texta:"The picture is",textb:"the wall.",label:"on",back:!0},p2p2:{x:218,y:14,texta:"The clock is",textb:"the window.",label:"above",back:!0},p2p3:{x:410,y:14,texta:"The plant is",textb:"the bookcase.",label:"on",back:!0},p2p4:{x:77,y:122,texta:"The lamp is",textb:"the sofa.",label:"next to",back:!0},p2p5:{x:218,y:144},p2p6:{x:405,y:144,texta:"The books are",textb:"the bookcase.",label:"in",back:!0},p2p7:{x:77,y:274,texta:"The boy is",textb:"the armchair.",label:"behind",back:!0},p2p8:{x:208,y:245,texta:"The doll is",textb:"the sofa.",label:"on",back:!0},p2p9:{x:404,y:248},p2p10:{x:76,y:376},p2p11:{x:222,y:374,texta:"The dog is",textb:"the table.",label:"under",back:!0},p2p12:{x:418,y:385}},this.answers=8,this.setPuzzle(2);break;case"p3":this.pieces={p3p1:{x:30,y:24},p3p2:{x:208,y:24},p3p3:{x:348,y:24,texta:"The boots are",textb:"the teddy bear.",label:"next to",back:!0},p3p4:{x:536,y:24},p3p5:{x:30,y:178,texta:"The picture is",textb:"the bed.",label:"above",back:!0},p3p6:{x:210,y:178,texta:"The brown cat is",textb:"the bed.",label:"on",back:!0},p3p7:{x:346,y:178,texta:"The dress is",textb:"the closet.",label:"in",back:!0},p3p8:{x:526,y:178,texta:"The pencil case is",textb:"the dresser.",label:"on",back:!0},p3p9:{x:30,y:340,texta:"The mouse is",textb:"the bed.",label:"behind",back:!0},p3p10:{x:176,y:340,texta:"The white cat is",textb:"the bed.",label:"under",back:!0},p3p11:{x:384,y:340},p3p12:{x:524,y:340,texta:"The schoolbag is",textb:"the dresser.",label:"next to",back:!0}},this.answers=8,this.setPuzzle(3)}return TweenLite.from(this.library.behind,1,{alpha:0,y:this.library.behind.y-40}),TweenLite.from(this.library["in"],1,{alpha:0,y:this.library["in"].y-40,delay:.2}),TweenLite.from(this.library.under,1,{alpha:0,y:this.library.under.y-40,delay:.4}),TweenLite.from(this.library.next,1,{alpha:0,y:this.library.next.y-40}),TweenLite.from(this.library.on,1,{alpha:0,y:this.library.on.y-40,delay:.2}),TweenLite.from(this.library.above,1,{alpha:0,y:this.library.above.y-40,delay:.4})},i.prototype.setPuzzle=function(e){var t,i,p,a,s,r,n,l,c,o,h,b,d;for(this.num=e,c=new createjs.Container,c.x=function(){switch(e){case 1:return 520;case 2:return 480;case 3:return 440}}(),c.y=460,c.name="puzzle",r=this.createBitmap("m"+e,"m"+e,0,0),c.addChild(r),a=b=1;12>=b;a=b+=1)this.pieces["p"+e+"p"+a].back?(n=new createjs.Container,n.set({name:"p"+e+"p"+a+"b",x:this.pieces["p"+e+"p"+a].x,y:this.pieces["p"+e+"p"+a].y}),t=this.createBitmap("p"+e+"p"+a+"b","p"+e+"p"+a+"back",0,0),t.mouseEnabled=!1,h=new createjs.Shape,h.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(0,0,t.getBounds().width,t.getBounds().height),h.name="p"+e+"p"+a+"shape",this.addToLibrary(h),o=new createjs.Shape,o.graphics.beginFill("rgba(255,255,255,0.0)").drawRect(-n.x-c.x,-n.y-c.y,stageSize.w,stageSize.h),n.addChild(t,h,o),n.mouseChildren=!1):n=this.createBitmap("p"+e+"p"+a,"p"+e+"p"+a,this.pieces["p"+e+"p"+a].x,this.pieces["p"+e+"p"+a].y),this.addToLibrary(n),c.addChild(n);for(p=new createjs.Container,p.x=stageSize.w/2,p.y=380,p.name="dragpieces",s=0,this.drops=[],a=d=1;12>=d;a=d+=1)l=this.preload.getResult("p"+e+"p"+a),i=new Draggable("dp"+e+"p"+a,this.preload.getResult("p"+e+"p"+a),"p"+e+"p"+a,176*s,0),i.y=i.y-l.height/2,i.pos.y=i.y,i.addEventListener("drop",this.evaluateAnswer),this.observer.subscribe("init_drag",i.onInitEvaluation),this.observer.subscribe("stop_drag",i.onStopEvaluation),i.scaleX=i.scaleY=.6,this.addToLibrary(i),this.drops.push(i),this.pieces["p"+e+"p"+a].back&&(s++,p.addChild(i));return p.width=176*s,this.setReg(p,p.width/2,0),this.addToMain(c),this.addToMain(p),c.cache(0,0,c.getBounds().width,c.getBounds().height),p.cache(0,-100,p.getBounds().width,p.getBounds().height),TweenLite.from(c,1,{alpha:0,y:c.y-40,delay:.6}),TweenLite.from(p,1,{alpha:0,y:c.y-40,delay:.6,onComplete:this.initDrag,onCompleteParams:[c,p]})},i.prototype.initDrag=function(e,t){return e&&e.uncache(),t&&t.uncache(),this.observer.notify("init_drag")},i.prototype.initListeners=function(){return this.library.behind.addEventListener("click",this.evaluateLocation),this.library["in"].addEventListener("click",this.evaluateLocation),this.library.under.addEventListener("click",this.evaluateLocation),this.library.next.addEventListener("click",this.evaluateLocation),this.library.on.addEventListener("click",this.evaluateLocation),this.library.above.addEventListener("click",this.evaluateLocation)},i.prototype.stopListeners=function(){return this.library.behind.removeEventListener("click",this.evaluateLocation),this.library["in"].removeEventListener("click",this.evaluateLocation),this.library.under.removeEventListener("click",this.evaluateLocation),this.library.next.removeEventListener("click",this.evaluateLocation),this.library.on.removeEventListener("click",this.evaluateLocation),this.library.above.removeEventListener("click",this.evaluateLocation)},i.prototype.evaluateAnswer=function(e){var t,i,p,a,s,r,n,l,c;if(this.answer=e.target,p=this.library[this.answer.index+"shape"],a=this.library[this.answer.name],l=p.globalToLocal(this.stage.mouseX,this.stage.mouseY),p.hitTest(l.x,l.y)){for(t=this.drops.indexOf(this.library[this.answer.name]),this.drops.splice(t,1),s=p.parent.localToGlobal(p.x,p.y),r=this.answer.parent.globalToLocal(s.x,s.y),this.wordcompleter=new AfterBeforeWord("dropper",this.pieces[this.answer.index].texta,"",this.pieces[this.answer.index].textb,"#FFF","#E90E2C",300,1120,220,60),this.wordcompleter.x=stageSize.w/2-this.wordcompleter.width/2,this.library.dropper&&this.mainContainer.removeChild(this.library.dropper),this.addToMain(this.wordcompleter),this.answer.complete=!0,this.answer.putInPlace(r),n=c=1;12>=c;n=c+=1)i=this.library["dp"+this.num+"p"+n],i.removeAllEventListeners();return this.initListeners()}return this.answer.returnToPlace(this.answer.alpha,this.answer.scaleX,this.answer.scaleY)},i.prototype.evaluateLocation=function(e){var t,i,p,a,s,r;for(a=e.target.name,"next"===a&&(a="next to"),a===this.pieces[this.answer.index].label?(this.wordcompleter.changeText(this.pieces[this.answer.index].label),createjs.Sound.play("good"),this.library.score.plusOne()):this.warning(),this.stopListeners(),r=[],p=s=1;12>=s;p=s+=1)i=this.library["dp"+this.num+"p"+p],t=this.drops.indexOf(this.library["dp"+this.num+"p"+p]),-1!==t?i.addEventListener("drop",this.evaluateAnswer):i.onStopEvaluation(),r.push(setTimeout(this.finishEvaluation,1e3));return r},i.prototype.finishEvaluation=function(){return TweenLite.to(this.library.dropper,.5,{alpha:0,y:stageSize.h,ease:Quart.easeOut,onComplete:this.nextEvaluation})},i.prototype.nextEvaluation=function(){return this.index++,this.index<this.answers?this.initDrag():this.finish()},i.prototype.blink=function(e,t){return null==t&&(t=!0),TweenMax.killTweensOf(e),e.alpha=1,t?TweenMax.to(e,.5,{alpha:.5,repeat:-1,yoyo:!0}):void 0},i.prototype.finish=function(){return TweenLite.to(this.library.dragpieces,1,{alpha:0,y:this.y-40}),TweenLite.to(this.library.puzzle,1,{alpha:0,y:this.y-40}),TweenMax.to([this.library.p1,this.library.p2,this.library.p3,this.library.behind,this.library["in"],this.library.under,this.library.next,this.library.on,this.library.above],1,{alpha:0,y:stageSize.h}),i.__super__.finish.apply(this,arguments)},window.U2A3=i,i}(Oda)}).call(this);