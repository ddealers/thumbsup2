var U5A1,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};U5A1=function(a){function b(){this.repeatSound=__bind(this.repeatSound,this),this.nextEvaluation=__bind(this.nextEvaluation,this),this.finishEvaluation=__bind(this.finishEvaluation,this),this.evaluateAnswer=__bind(this.evaluateAnswer,this),this.evaluateDrop=__bind(this.evaluateDrop,this),this.initEvaluation=__bind(this.initEvaluation,this);var a,c;a=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"repeatbtn",src:"repeat-btn.png"},{id:"playagain",src:"play_again.png"},{id:"startgame",src:"start_game.png"},{id:"btnFinished",src:"btn_finished.png"},{id:"propCalendar",src:"prop_calendar.png"},{id:"btnRepeat",src:"btn_repeat.png"},{id:"cal1Final2",src:"cal1/cal1final2.png"},{id:"cal1Final6",src:"cal1/cal1final6.png"},{id:"cal1Final9",src:"cal1/cal1final9.png"},{id:"cal1Final11",src:"cal1/cal1final11.png"},{id:"cal1Final3",src:"cal1/final_sled.png"},{id:"cal1Final4",src:"cal1/final_scooter.png"},{id:"cal1Final10",src:"cal1/final_rake.png"},{id:"cal1Final7",src:"cal1/final_noshoes.png"},{id:"cal1Final12",src:"cal1/final_grandma.png"},{id:"cal1Final5",src:"cal1/final_flowers.png"},{id:"cal1Final1",src:"cal1/final_chocolate.png"},{id:"cal1Final8",src:"cal1/final_cake.png"},{id:"cal1Dragble8",src:"cal1/dragble_sled.png"},{id:"cal1Dragble4",src:"cal1/dragble_scooter.png"},{id:"cal1Dragble6",src:"cal1/dragble_rake.png"},{id:"cal1Dragble7",src:"cal1/dragble_noshoes.png"},{id:"cal1Dragble1",src:"cal1/dragble_grandma.png"},{id:"cal1Dragble5",src:"cal1/dragble_flowers.png"},{id:"cal1Dragble2",src:"cal1/dragble_chocolate.png"},{id:"cal1Dragble3",src:"cal1/dragble_cake.png"},{id:"cal2Final12",src:"cal2/cal2final12.png"},{id:"cal2Final6",src:"cal2/cal2final6.png"},{id:"cal2Final8",src:"cal2/cal2final8.png"},{id:"cal2Final10",src:"cal2/cal2final10.png"},{id:"cal2Final9",src:"cal2/final_soccer.png"},{id:"cal2Final1",src:"cal2/final_snowman.png"},{id:"cal2Final7",src:"cal2/final_pool.png"},{id:"cal2Final5",src:"cal2/final_picnic.png"},{id:"cal2Final2",src:"cal2/final_kite.png"},{id:"cal2Final11",src:"cal2/final_guitar.png"},{id:"cal2Final3",src:"cal2/final_eggs.png"},{id:"cal2Final4",src:"cal2/final_bike.png"},{id:"cal2Dragble2",src:"cal2/dragble_soccer.png"},{id:"cal2Dragble3",src:"cal2/dragble_snowman.png"},{id:"cal2Dragble1",src:"cal2/dragble_pool.png"},{id:"cal2Dragble8",src:"cal2/dragble_picnic.png"},{id:"cal2Dragble7",src:"cal2/dragble_kite.png"},{id:"cal2Dragble4",src:"cal2/dragble_guitar.png"},{id:"cal2Dragble6",src:"cal2/dragble_eggs.png"},{id:"cal2Dragble5",src:"cal2/dragble_bike.png"}],c=[{src:"sounds/good.mp3",id:"good"},{src:"sounds/wrong.mp3",id:"wrong"},{src:"sounds/TU2_U5_A1_instructions.mp3",id:"instructions"},{src:"sounds/TU2_U5_A1_calendar1.mp3",id:"cal1"},{src:"sounds/TU2_U5_A1_calendar2.mp3",id:"cal2"}],this.game=[{finales:[{x:365,y:396},{x:588,y:400},{x:776,y:424},{x:390,y:520},{x:612,y:514},{x:794,y:530},{x:423,y:646},{x:650,y:642},{x:830,y:634},{x:451,y:779},{x:680,y:744},{x:890,y:750}],drags:[{x:140,y:1016},{x:314,y:1054},{x:456,y:1010},{x:604,y:1026},{x:778,y:1006},{x:930,y:1028},{x:1078,y:1024},{x:1270,y:1042}],drops:[{id:"cal1Dragble2",tgt:"cal1Final1"},{id:"cal1Dragble8",tgt:"cal1Final3"},{id:"cal1Dragble4",tgt:"cal1Final4"},{id:"cal1Dragble5",tgt:"cal1Final5"},{id:"cal1Dragble7",tgt:"cal1Final7"},{id:"cal1Dragble3",tgt:"cal1Final8"},{id:"cal1Dragble6",tgt:"cal1Final10"},{id:"cal1Dragble1",tgt:"cal1Final12"}]},{finales:[{x:362,y:386},{x:584,y:404},{x:776,y:424},{x:386,y:510},{x:616,y:518},{x:794,y:526},{x:418,y:640},{x:632,y:636},{x:848,y:634},{x:432,y:770},{x:684,y:766},{x:916,y:731}],drags:[{x:140,y:1016},{x:314,y:1054},{x:456,y:1010},{x:564,y:1026},{x:698,y:1006},{x:890,y:1028},{x:1078,y:1024},{x:1230,y:1042}],drops:[{id:"cal2Dragble3",tgt:"cal2Final1"},{id:"cal2Dragble7",tgt:"cal2Final2"},{id:"cal2Dragble6",tgt:"cal2Final3"},{id:"cal2Dragble5",tgt:"cal2Final4"},{id:"cal2Dragble8",tgt:"cal2Final5"},{id:"cal2Dragble1",tgt:"cal2Final7"},{id:"cal2Dragble2",tgt:"cal2Final9"},{id:"cal2Dragble4",tgt:"cal2Final11"}]}],b.__super__.constructor.call(this,null,a,c)}return __extends(b,a),b.prototype.setStage=function(){var a,c;return b.__super__.setStage.apply(this,arguments),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions",["Listen and drag the pictures to the correct month on the calendar."],80,200),c=new Button("btnRepeat",this.preload.getResult("btnRepeat"),0,1196,490),a=new Button("btnFinished",this.preload.getResult("btnFinished"),0,1196,584),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,16,0)),this.addToMain(c,a),this.addToLibrary(c,a),this.setCalendar(1).introEvaluation()},b.prototype.setCalendar=function(a){var b,c,d,e,f,g,h,i;for(this.calendar=a,c=new createjs.Container,c.name="calendar",c.x=120,c.y=0,this.insertBitmap("propCalendar","propCalendar",120,256),e=h=1;12>=h;e=++h)b=new createjs.Container,b.name="cal"+a+"Final"+e+"cont",b.x=this.game[a-1].finales[e-1].x,b.y=this.game[a-1].finales[e-1].y,1===a?2===e||6===e||9===e||11===e?(g=this.createBitmap("","cal"+a+"Final"+e,0,0),g.mouseEnabled=!1,b.addChild(g)):(d=new createjs.Shape,d.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(-50,-50,180,110),d.name="cal"+a+"Final"+e,b.addChild(d)):2===a&&(6===e||8===e||10===e||12===e?(g=this.createBitmap("","cal"+a+"Final"+e,0,0),g.mouseEnabled=!1,b.addChild(g)):(d=new createjs.Shape,d.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(-50,-50,180,110),d.name="cal"+a+"Final"+e,b.addChild(d))),f=new createjs.Shape,f.graphics.beginFill("rgba(255,255,255,0.001)").drawRect(-50-b.x,-50-b.y,stageSize.w,stageSize.h),b.addChild(f),c.addChild(b),this.addToLibrary(b,d);for(e=i=1;8>=i;e=++i)g=new Draggable("cal"+a+"Dragble"+e,this.preload.getResult("cal"+a+"Dragble"+e),"cal"+a+"Final"+e,this.game[a-1].drags[e-1].x,this.game[a-1].drags[e-1].y),g.onInitEvaluation(),c.addChild(g),this.addToLibrary(g);return this.addToMain(c),this.addToLibrary(c),this},b.prototype.introEvaluation=function(){return b.__super__.introEvaluation.apply(this,arguments),this.library.calendar.cache(-100,-100,this.library.calendar.getBounds().width+300,this.library.calendar.getBounds().height+500),TweenLite.set(this.library.calendar,{alpha:0}),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:0}),TweenLite.from(this.library.btnRepeat,1,{alpha:0,y:this.library.btnRepeat.y+40,delay:1}),TweenLite.from(this.library.btnFinished,1,{alpha:0,y:this.library.btnFinished.y+40,delay:1}),TweenLite.to(this.library.calendar,1,{alpha:1,y:0,delay:2,onComplete:this.playInstructions,onCompleteParams:[this]})},b.prototype.initEvaluation=function(){var a,c;for(b.__super__.initEvaluation.apply(this,arguments),this.library.calendar.uncache(),a=c=1;8>=c;a=++c)this.library["cal"+this.calendar+"Dragble"+a].addEventListener("drop",this.evaluateDrop);return this.library.btnRepeat.addEventListener("click",this.repeatSound),this.library.btnFinished.addEventListener("click",this.evaluateAnswer),createjs.Sound.play("cal"+this.calendar)},b.prototype.evaluateDrop=function(a){var b,c,d,e,f,g,h,i,j;for(this.answer=a.target,c=!1,d=0,j=this.game[this.calendar-1].drops,h=0,i=j.length;i>h;h++)b=j[h],e=this.library[b.tgt].globalToLocal(this.stage.mouseX,this.stage.mouseY),this.library[b.tgt].hitTest(e.x,e.y)&&(c=!0,this.answer.visible=!1,f=this.game[this.calendar-1].drops.where({id:this.answer.name}),g=this.createBitmap(f[0].id,f[0].tgt,45,25),g.hitter=this.answer,g.addEventListener("mousedown",function(a){var b;return b=a.currentTarget,b.addEventListener("pressmove",function(){var a;if(b.hitter){for(b.removeAllEventListeners(),a=b.parent;a.children.length>1;)a.removeChildAt(a.children.length-1);return b.hitter.visible=!0,b.hitter.returnToPlace()}})}),this.setReg(g,g.width/2,g.height/2),this.library[b.tgt].respuesta=this.answer.name,this.library[b.tgt].parent.addChild(g));return c?void 0:this.answer.returnToPlace()},b.prototype.evaluateAnswer=function(){var a,b,c,d;for(this.library.btnRepeat.removeEventListener("click",this.repeatSound),this.library.btnFinished.removeEventListener("click",this.evaluateAnswer),createjs.Sound.stop(),a=this.game[this.calendar-1].drops,b=c=1,d=a.length;d>=c;b=c+=1)this.library[a[b-1].tgt].parent.children.length>2&&(this.library[a[b-1].tgt].parent.children[2].name===a[b-1].id?(this.library.score.plusOne(),createjs.Sound.play("good")):dealersjs.mobile.isIOS()||dealersjs.mobile.isAndroid()?this.library[a[b-1].tgt].parent.alpha=.4:this.blink(this.library[a[b-1].tgt].parent));return setTimeout(this.finishEvaluation,4e3)},b.prototype.finishEvaluation=function(){return this.library.calendar.cache(0,0,this.library.calendar.getBounds().width+400,this.library.calendar.getBounds().height+1e3),TweenLite.to(this.library.calendar,1,{alpha:0,y:this.library.calendar.y-40}),TweenLite.to(this.library.propCalendar,1,{alpha:0,y:this.library.propCalendar.y-40,delay:1,onComplete:this.nextEvaluation})},b.prototype.nextEvaluation=function(){var a,b;if(this.index++,this.library.calendar.uncache(),this.index<this.game.length){for(this.setCalendar(this.index+1),a=b=1;8>=b;a=++b)this.library["cal"+this.calendar+"Dragble"+a].addEventListener("drop",this.evaluateDrop);return this.library.btnRepeat.addEventListener("click",this.repeatSound),this.library.btnFinished.addEventListener("click",this.evaluateAnswer),createjs.Sound.stop(),createjs.Sound.play("cal"+this.calendar)}return this.finish()},b.prototype.repeatSound=function(){return createjs.Sound.stop(),createjs.Sound.play("cal"+this.calendar)},b.prototype.finish=function(){return createjs.Sound.stop(),TweenLite.to(this.library.btnRepeat,1,{alpha:0,y:this.library.btnRepeat.y+40}),TweenLite.to(this.library.btnFinished,1,{alpha:0,y:this.library.btnFinished.y+40}),b.__super__.finish.apply(this,arguments)},window.U5A1=b,b}(Oda);