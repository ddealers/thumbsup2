(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,i=function(e,t){function i(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};e=function(e){function s(){this.repeat=t(this.repeat,this),this.showPhrase=t(this.showPhrase,this),this.nextEvaluation=t(this.nextEvaluation,this),this.finishEvaluation=t(this.finishEvaluation,this),this.evaluateAnswer=t(this.evaluateAnswer,this),this.initEvaluation=t(this.initEvaluation,this);var e,i;e=[{id:"head",src:"pleca1.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"teacher",src:"teacher.png"},{id:"repeat",src:"repeat_btn.png"},{id:"arrive",src:"arrive_time.png"},{id:"quiet",src:"be_quiet.png"},{id:"bus",src:"bus_late.png"},{id:"eat",src:"eat_class.png"},{id:"aud",src:"run_aud.png"},{id:"run",src:"run_hall.png"},{id:"cafe",src:"trash_cafeteria.png"},{id:"library",src:"talk_library.png"},{id:"movies",src:"watch_movies.png"},{id:"trash",src:"throw_trash.png"},{id:"walk",src:"walk_hall.png"}],i=[{src:"sounds/TU2_U1_A4_instructions.mp3",id:"instructions"},{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/TU2_U1_A4_arriveClass.mp3",id:"sarrive"},{src:"sounds/TU2_U1_A4_beQuiet.mp3",id:"squiet"},{src:"sounds/TU2_U1_A4_dontBeLate.mp3",id:"sbus"},{src:"sounds/TU2_U1_A4_dontEat.mp3",id:"seat"},{src:"sounds/TU2_U1_A4_dontRunAuditorium.mp3",id:"saud"},{src:"sounds/TU2_U1_A4_dontRunHall.mp3",id:"srun"},{src:"sounds/TU2_U1_A4_keepCafe.mp3",id:"scafe"},{src:"sounds/TU2_U1_A4_sitQuietly.mp3",id:"smovies"},{src:"sounds/TU2_U1_A4_talkQuietly.mp3",id:"slibrary"},{src:"sounds/TU2_U1_A4_throwAway.mp3",id:"strash"},{src:"sounds/TU2_U1_A4_walkHall.mp3",id:"swalk"},{src:"sounds/wrong.mp3",id:"wrong"}],this.game={answers:[{id:"arrive",a:!1},{id:"quiet",a:!1},{id:"bus",a:!1},{id:"eat",a:!1},{id:"aud",a:!1},{id:"run",a:!1},{id:"cafe",a:!1},{id:"library",a:!1},{id:"movies",a:!1},{id:"trash",a:!1},{id:"walk",a:!1}]},s.__super__.constructor.call(this,null,e,i)}return i(s,e),s.prototype.setStage=function(){var e,t,i,r,a,n,o,h,l,u,c;for(s.__super__.setStage.apply(this,arguments),this.answers=this.game.answers.slice(0),c=this.answers,l=0,u=c.length;u>l;l++)e=c[l],e.a=!1;return this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions",["Listen and click on the correct picture."],80,200),this.insertBitmap("teacher","teacher",500,268),r=new Button("repeat",this.preload.getResult("repeat"),0,882,420),o=this.createSprite("choose1",["arrive","quiet","bus","eat","aud","run","cafe","library","movies","trash","walk"],{arrive:0,quiet:1,bus:2,eat:3,aud:4,run:5,cafe:6,library:7,movies:8,trash:9,walk:10},0,0),o.mouseEnabled=!1,a=new createjs.Shape,a.graphics.beginFill("rgba(255,255,255,0.1)").drawRect(0,0,o.getBounds().width,o.getBounds().height),t=new createjs.Container,t.set({name:"choose1",x:540,y:904,sprite:o}),this.setReg(t,o.getBounds().width/2,o.getBounds().height/2),t.addChild(o,a),h=this.createSprite("choose2",["arrive","quiet","bus","eat","aud","run","cafe","library","movies","trash","walk"],{arrive:0,quiet:1,bus:2,eat:3,aud:4,run:5,cafe:6,library:7,movies:8,trash:9,walk:10},0,0),h.mouseEnabled=!1,n=new createjs.Shape,n.graphics.beginFill("rgba(255,255,255,0.1)").drawRect(0,0,h.getBounds().width,h.getBounds().height),i=new createjs.Container,i.set({name:"choose2",x:1182,y:904,sprite:h}),this.setReg(i,h.getBounds().width/2,h.getBounds().height/2),i.addChild(h,n),this.addToMain(r,t,i),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,10,0)),this.introEvaluation()},s.prototype.introEvaluation=function(){return s.__super__.introEvaluation.apply(this,arguments),this.library.choose1.alpha=0,this.library.choose1.scaleX=this.library.choose1.scaleY=.6,this.library.choose2.alpha=0,this.library.choose2.scaleX=this.library.choose2.scaleY=.6,TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:.5}),TweenLite.from(this.library.teacher,1,{alpha:0,y:this.library.teacher.y+100,delay:1}),TweenLite.from(this.library.repeat,1,{alpha:0,y:this.library.repeat.y+100,delay:1,onComplete:this.playInstructions,onCompleteParams:[this]})},s.prototype.initEvaluation=function(){return s.__super__.initEvaluation.apply(this,arguments),this.showPhrase(),this.library.repeat.addEventListener("click",this.repeat)},s.prototype.evaluateAnswer=function(e){var t;return this.answer=e.target.parent.sprite,t=this.answers.where({id:this.phrase.id}),t[0].a=!0,this.phrase.id===this.answer.currentAnimation?(createjs.Sound.play("good"),this.library.score.plusOne(),this.library.choose1.removeEventListener("click",this.evaluateAnswer),this.library.choose2.removeEventListener("click",this.evaluateAnswer),setTimeout(this.finishEvaluation,1e3)):(TweenMax.to([this.library.choose1,this.library.choose2],1,{alpha:0,scaleX:.6,scaleY:.6,ease:Elastic.easeOut,onComplete:this.finishEvaluation}),this.warning())},s.prototype.finishEvaluation=function(){return TweenMax.to([this.library.choose1,this.library.choose2],1,{alpha:0,scaleX:.6,scaleY:.6,ease:Elastic.easeOut,onComplete:this.nextEvaluation})},s.prototype.nextEvaluation=function(){return this.index++,this.index<this.answers.length-1?this.showPhrase():this.finish()},s.prototype.showPhrase=function(){var e,t,s,i,r=this;return i=Math.random()>.5?1:2,t=1===i?2:1,this.phrase=this.getPhrase(),s=this.answers.filter(function(e){return e.id!==r.phrase.id}),e=Math.floor(Math.random()*s.length),this.library["choose"+i].sprite.gotoAndStop(this.phrase.id),this.library["choose"+t].sprite.gotoAndStop(s[e].id),this.library.choose1.addEventListener("click",this.evaluateAnswer),this.library.choose2.addEventListener("click",this.evaluateAnswer),createjs.Sound.play("s"+this.phrase.id),TweenMax.to([this.library.choose1,this.library.choose2],1,{alpha:1,scaleX:1,scaleY:1,ease:Elastic.easeOut})},s.prototype.getPhrase=function(){var e,t;return t=this.answers.filter(function(e){return e.a===!1}),e=Math.floor(Math.random()*t.length),t[e]},s.prototype.repeat=function(){return createjs.Sound.stop(),createjs.Sound.play("s"+this.phrase.id)},s.prototype.shuffle=function(e){var t,s,i,r,a,n;for(n=[],t=i=r=e.length;1>=r?1>=i:i>=1;t=1>=r?++i:--i)s=Math.floor(Math.random()*(t+1)),n.push((a=[e[s],e[t]],e[t]=a[0],e[s]=a[1],a));return n},s.prototype.blink=function(e,t){return null==t&&(t=!0),TweenMax.killTweensOf(e),e.alpha=1,t?TweenMax.to(e,.5,{alpha:.5,repeat:-1,yoyo:!0}):void 0},s.prototype.finish=function(){return TweenLite.to(this.library.teacher,1,{alpha:0,y:this.library.teacher.y+100,delay:.1}),TweenLite.to(this.library.repeat,1,{alpha:0,y:this.library.repeat.y+100,delay:.1}),s.__super__.finish.apply(this,arguments)},window.U1A4=s,s}(Oda)}).call(this);